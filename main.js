(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{hi:()=>Y,$z:()=>ee,ON:()=>W,L1:()=>ne,lH:()=>Q,Ph:()=>Z,Kc:()=>te,eY:()=>G});var t={inputSelector:".form__input",submitButtonSelector:".button_type_submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".button_type_add"),o=document.querySelector(".profile__avatar-overlay");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.authToken=t.headers.authorization}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendNewCardInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendUserInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendUserAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendСardDeleteRequest",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.ok:Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendSetLikeRequest",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendRemoveLikeRequest",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardData=t.cardData,this._template=document.querySelector(t.templateSelector),this._myIdentificator=t.myIdentificator,this._handleOnCardClick=t.handleOnCardClick,this._handleDeleteBtnClick=t.handleDeleteBtnClick,this._handleLikeCard=t.handleLikeCard}var t,n;return t=e,(n=[{key:"_setLikeBtnState",value:function(e){e?(this._currentCardLikeBtn.classList.add("button_active"),this._cardIsLikedByMe=!0):(this._currentCardLikeBtn.classList.remove("button_active"),this._cardIsLikedByMe=!1)}},{key:"_deleteDomElement",value:function(){this._currentElement.remove(),this._currentElement=null}},{key:"_setEventListeners",value:function(){var e=this;this._currentCardPicture.addEventListener("click",(function(){return e._handleOnCardClick(e._cardData.name,e._cardData.link)})),this._imageDeleteBtn=this._currentElement.querySelector(".button_type_delete"),this._imageDeleteBtn.addEventListener("click",(function(){e._handleDeleteBtnClick(e._cardData._id,e._deleteDomElement.bind(e))})),this._currentCardLikeBtn.addEventListener("click",(function(){e._handleLikeCard(e._cardIsLikedByMe,e._cardData._id,e._currentCardLikeCounter,e._setLikeBtnState.bind(e))}))}},{key:"createElementNode",value:function(){var e=this;return this._currentElement=this._template.content.querySelector(".element").cloneNode(!0),this._currentCardName=this._currentElement.querySelector(".element__caption"),this._currentCardName.textContent=this._cardData.name,this._currentCardPicture=this._currentElement.querySelector(".element__image"),this._currentCardPicture.alt=this._cardData.name,this._currentCardPicture.src=this._cardData.link,this._currentCardLikeCounter=this._currentElement.querySelector(".element__like-count"),this._currentCardLikeCounter.textContent=this._cardData.likes.length,this._currentCardLikeBtn=this._currentElement.querySelector(".button_type_like"),this._cardIsLikedByMe=this._cardData.likes.some((function(t){return t._id==e._myIdentificator})),this._cardIsLikedByMe&&this._setLikeBtnState(!0),this._currentDeleteButton=this._currentElement.querySelector(".button_type_delete"),this._cardData.owner._id!==this._myIdentificator&&this._currentDeleteButton.classList.add("button_hidden"),this._setEventListeners(),this._currentElement}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=function(e,t){Q.open(e,t)},l=function(e,t){ee.open(),ee.waitUntilClosed().then((function(t){return t?Y["sendСardDeleteRequest"](e):Promise.reject(!1)})).then((function(e){if(e)return t(),ee.renderLoading(!1),void ee.close()})).catch((function(e){console.log("".concat(e,": передумал удалять"))}))},f=function(e,t,n,r){Promise.resolve().then((function(){return e?Y.sendRemoveLikeRequest(t).then((function(e){return r(!1),e})):Y.sendSetLikeRequest(t).then((function(e){return r(!0),e}))})).then((function(e){n.textContent=e.likes.length}))},p=function(e,t){return new u({cardData:e,templateSelector:".template_type_card",myIdentificator:t,handleOnCardClick:s,handleDeleteBtnClick:l,handleLikeCard:f}).createElementNode()};function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=d((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_showInputError",(function(e,t){r._errorElement=r._form.querySelector("#".concat(e.id,"-error")),e.classList.add(r._validationConfig.inputErrorClass),r._errorElement.classList.add(r._validationConfig.errorClass),r._errorElement.textContent=t})),y(this,"_hideInputError",(function(e){r._errorElement=r._form.querySelector("#".concat(e.id,"-error")),e.classList.remove(r._validationConfig.inputErrorClass),r._errorElement.classList.remove(r._validationConfig.errorClass),r._errorElement.textContent=""})),y(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),y(this,"_handleInput",(function(e){r._checkInputValidity(e),r.setSubmitBtnState()})),y(this,"_setEventListeners",(function(){r._inputList=Array.from(r._form.querySelectorAll(r._validationConfig.inputSelector)),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._handleInput(e)}))}))})),y(this,"clearErrorMessages",(function(){r._inputList.forEach((function(e){r._hideInputError(e)}))})),y(this,"setSubmitBtnState",(function(){r._form.checkValidity()?(r._submitBtn.removeAttribute("disabled"),r._submitBtn.classList.remove(r._validationConfig.inactiveButtonClass)):(r._submitBtn.setAttribute("disabled",!0),r._submitBtn.classList.add(r._validationConfig.inactiveButtonClass))})),y(this,"enableValidation",(function(){r._setEventListeners()})),this._validationConfig=t,this._form=n,this._submitBtn=this._form.querySelector(this._validationConfig.submitButtonSelector)}));function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t.renderer,this._container=document.querySelector(t.containerSelector)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e,t){var n=this;e.forEach((function(e){return n._renderer(e,t)}))}},{key:"addItemAfterLastOne",value:function(e){this._container.append(e)}},{key:"addItemBeforeFirstOne",value:function(e){this._container.prepend(e)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handlePopupOverlayClick",value:function(e){e.currentTarget==e.target&&this.close()}},{key:"_handlePopubCloseBtnClick",value:function(){this.close()}},{key:"setEventListeners",value:function(){this._popup.querySelector(".button_type_close").addEventListener("click",this._handlePopubCloseBtnClick.bind(this)),this._popup.addEventListener("click",this._handlePopupOverlayClick.bind(this))}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose.bind(this))}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose.bind(this))}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function S(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).imgPopupImageElement=t._popup.querySelector(".popup__image"),t.imgPopupCaption=t._popup.querySelector(".popup__image-caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this.imgPopupImageElement.alt=e,this.imgPopupImageElement.src=t,this.imgPopupCaption.textContent=e,C(P(a.prototype),"open",this).call(this)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function D(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e)).submitFormFunction=t,n.form=n._popup.querySelector(".form"),n._inputList=n.form.querySelectorAll(".form__input"),n._submitButton=n.form.querySelector(".button_type_submit"),n._closeButton=n._popup.querySelector(".button_type_close"),n}return t=a,(n=[{key:"renderLoading",value:function(e){e?this._submitButton.textContent=this._submitButton.textContent+"...":e||(this._submitButton.textContent=this._submitButton.textContent.slice(0,-3))}},{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.id]=t.value})),e}},{key:"_handleSubmitEvent",value:function(e){e.preventDefault(),this.submitFormFunction(this._getInputValues())}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){I(R(a.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",this._handleSubmitEvent.bind(this))}},{key:"close",value:function(){I(R(a.prototype),"close",this).call(this),this.form.reset()}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=z(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function M(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).form=t._popup.querySelector(".form"),t._closeButton=t._popup.querySelector(".button_type_close"),t._submitButton=t._popup.querySelector(".button_type_submit"),t._promise=null,t}return t=a,(n=[{key:"renderLoading",value:function(e){e?this._submitButton.textContent=this._submitButton.textContent+"...":e||(this._submitButton.textContent=this._submitButton.textContent.slice(0,-3))}},{key:"_handleEscClose",value:function(e){N(F(a.prototype),"_handleEscClose",this).call(this,e),null!==this._promise&&(this._resolvePromise(!1),this._promise=null)}},{key:"_handlePopubCloseBtnClick",value:function(){N(F(a.prototype),"_handlePopubCloseBtnClick",this).call(this),null!==this._promise&&(this._resolvePromise(!1),this._promise=null)}},{key:"_handlePopupOverlayClick",value:function(e){e.currentTarget==e.target&&(null!==this._promise&&(this._resolvePromise(!1),this._promise=null),N(F(a.prototype),"close",this).call(this))}},{key:"_handleSubmitEvent",value:function(e){e.preventDefault(),this.renderLoading(!0),null!==this._promise&&(this._resolvePromise(!0),this._promise=null)}},{key:"waitUntilClosed",value:function(){var e=this;return null==this._promise&&(this._promise=new Promise((function(t,n){e._resolvePromise=t}))),this._promise}},{key:"setEventListeners",value:function(){N(F(a.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",this._handleSubmitEvent.bind(this))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){var n=t.profileNameSelector,r=t.profileAboutSelector,o=t.profileAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameEl=document.querySelector(n),this._profileAboutEl=document.querySelector(r),this.profileAvatarEl=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.profileName=this._profileNameEl.textContent,e.profileAbout=this._profileAboutEl.textContent,e}},{key:"setUserAvatar",value:function(e){this.profileAvatarEl.src=e}},{key:"setUserInfo",value:function(e,t){this._profileNameEl.textContent=e,this._profileAboutEl.textContent=t}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=new a({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"8abcd093-addb-4bd1-b00f-f600aa41c00a","Content-Type":"application/json"}}),G=new $({profileNameSelector:".profile__name",profileAboutSelector:".profile__about",profileAvatarSelector:".profile__avatar"}),Q=new L(".popup_type_image");Q.setEventListeners();var W=new A(".popup_type_new-card",(function(e){var t=e["form__input_type_place-name"],n=e["form__input_type_image-link"];W.renderLoading(!0),Y.sendNewCardInfo(t,n).then((function(e){var t=p(e,e.owner._id);oe.addItemBeforeFirstOne(t),W.renderLoading(!1),W.close()}))}));W.setEventListeners();var X=new A(".popup_type_new-avatar",(function(e){var t=e["form__input_type_avatar-link"];X.renderLoading(!0),Y.sendUserAvatar(t).then((function(e){G.setUserAvatar(e.avatar),X.renderLoading(!1),X.close()}))}));X.setEventListeners();var Z=new A(".popup_type_profile",(function(e){Z.renderLoading(!0),Y.sendUserInfo(e["form__input_type_profile-name"],e["form__input_type_profile-about"]).then((function(e){return G.setUserInfo(e.name,e.about),Z.renderLoading(!1),Z.close(),e}))}));Z.setEventListeners();var ee=new H(".popup_type_confirmation");ee.setEventListeners();var te=new _(t,Z.form),ne=new _(t,W.form),re=new _(t,X.form);te.enableValidation(),ne.enableValidation(),re.enableValidation(),n.addEventListener("click",(function(){var e=G.getUserInfo();Z.setInputValues(e),te.clearErrorMessages(),te.setSubmitBtnState(),Z.open()})),r.addEventListener("click",(function(){te.clearErrorMessages(),ne.setSubmitBtnState(),W.open()})),o.addEventListener("click",(function(e){X.open()}));var oe=new b({renderer:function(e,t){var n=p(e,t);oe.addItemAfterLastOne(n)},containerSelector:".elements__list"}),ie=new b({renderer:function(e){var t=createProfileSection(e);ie.addItemAfterLastOne(t)},containerSelector:".profile"});Promise.all([Y.getUserInfo(),Y.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return G.setUserInfo(o.name,o.about),G.setUserAvatar(o.avatar),oe.renderItems(i,o._id),o})).catch((function(e){console.log("Ошибка: ".concat(e))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXNCLEtBS2hELE9BSkE2QyxFQUFTaUIsWUFBWUQsRUFBbUJsSyxLQUFNa0ssRUFBbUI1SixPQUNqRTRJLEVBQVNhLGNBQWNHLEVBQW1CMUosUUFDMUNrSixHQUFrQjBCLFlBQVkvRSxFQUF3QjZELEVBQW1CakksS0FFbEVpSSxDQUNULElBQ0N0SyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUksV0FBRCxPQUFZRixHQUN6QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGNvbnN0IGFwaU9wdGlvbnMgPSB7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01NVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI4YWJjZDA5My1hZGRiLTRiZDEtYjAwZi1mNjAwYWE0MWMwMGFcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICAvL9GB0LXQu9C10LrRgtC+0YDRiyDRgSDRgtC+0YfQutC+0Lkg0LIg0L3QsNGH0LDQu9C1OlxuICAvL2Zvcm1TZWxlY3RvcjogXCIuZm9ybVwiLCDQvdC1INC40YHQv9C+0LvRjNC30YPQtdGC0YHRj1xuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICAvL2Vycm9yU2VsZWN0b3I6IFwiLmZvcm1fX2Vycm9yXCIsINC90LUg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5idXR0b25fdHlwZV9zdWJtaXRcIixcblxuICAvL9C60LvQsNGB0YHRiyDQsdC10Lcg0YLQvtGH0LrQuCDQsiDQvdCw0YfQsNC70LU6XG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvQ29uZmlnID0ge1xuICBwcm9maWxlTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gIHByb2ZpbGVBYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19hYm91dFwiLFxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxufTtcblxuLy/QvdCw0YXQvtC00LjQvCDQutC90L7Qv9C60Lgg0L3QsCDRgdGC0YDQsNC90LjRhtC1XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2VkaXRcIik7XG5leHBvcnQgY29uc3QgbmV3Q2FyZEFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfYWRkXCIpO1xuZXhwb3J0IGNvbnN0IGF2YXRhck92ZXJsYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXlcIik7XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLmF1dGhUb2tlbiA9IG9wdGlvbnMuaGVhZGVycy5hdXRob3JpemF0aW9uO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhUb2tlbixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgYXBpOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFRva2VuLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCBhcGk6ICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBzZW5kTmV3Q2FyZEluZm8obmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRoVG9rZW4sXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHNlbmRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFRva2VuLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHNlbmRVc2VyQXZhdGFyKGF2YXRhclVybCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhUb2tlbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGF2YXRhclVybCxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHNlbmTQoWFyZERlbGV0ZVJlcXVlc3QoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhUb2tlbixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMub2s7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgYXBpOiAke2Vycn1gKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgc2VuZFNldExpa2VSZXF1ZXN0KGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRoVG9rZW4sXG4gICAgICB9LFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCBhcGk6ICR7ZXJyfWApO1xuICAgICAgfSk7XG4gIH1cblxuICBzZW5kUmVtb3ZlTGlrZVJlcXVlc3QoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhUb2tlbixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fY2FyZERhdGEgPSBvcHRpb25zLmNhcmREYXRhO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnRlbXBsYXRlU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fbXlJZGVudGlmaWNhdG9yID0gb3B0aW9ucy5teUlkZW50aWZpY2F0b3I7XG5cbiAgICB0aGlzLl9oYW5kbGVPbkNhcmRDbGljayA9IG9wdGlvbnMuaGFuZGxlT25DYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnRuQ2xpY2sgPSBvcHRpb25zLmhhbmRsZURlbGV0ZUJ0bkNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gb3B0aW9ucy5oYW5kbGVMaWtlQ2FyZDtcbiAgfVxuXG4gIF9zZXRMaWtlQnRuU3RhdGUoaXNMaWtlZCkge1xuICAgIGlmIChpc0xpa2VkKSB7XG4gICAgICB0aGlzLl9jdXJyZW50Q2FyZExpa2VCdG4uY2xhc3NMaXN0LmFkZChcImJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB0aGlzLl9jYXJkSXNMaWtlZEJ5TWUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdXJyZW50Q2FyZExpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZShcImJ1dHRvbl9hY3RpdmVcIik7XG4gICAgICB0aGlzLl9jYXJkSXNMaWtlZEJ5TWUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfZGVsZXRlRG9tRWxlbWVudCgpIHtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudC5yZW1vdmUoKTtcbiAgICAvL9Cf0YDQuCDRg9C00LDQu9C10L3QuNC4INGN0LrQt9C10LzQv9C70Y/RgNCwINC60LvQsNGB0YHQsCDQtdCz0L4g0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L4g0L/QvtGB0LvQtSDRg9C00LDQu9C10L3QuNGPINC90YPQttC90L4g0LfQsNC90YPQu9GP0YLRjC5cbiAgICAvL3JlbW92ZSDRg9C00LDQu9GP0LXRgiDRgtC+0LvRjNC60L4g0YDQsNC30LzQtdGC0LrRgyDQuNC3IGh0bWwsINGB0LDQvCDQvtCx0YrQtdC60YIg0LrQsNGA0YLQvtGH0LrQuCDQvtGB0YLQsNC10YLRgdGPINCyINC/0LDQvNGP0YLQuFxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jdXJyZW50Q2FyZFBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVPbkNhcmRDbGljayh0aGlzLl9jYXJkRGF0YS5uYW1lLCB0aGlzLl9jYXJkRGF0YS5saW5rKVxuICAgICk7XG5cbiAgICB0aGlzLl9pbWFnZURlbGV0ZUJ0biA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfZGVsZXRlXCIpO1xuICAgIHRoaXMuX2ltYWdlRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdG5DbGljayh0aGlzLl9jYXJkRGF0YS5faWQsIHRoaXMuX2RlbGV0ZURvbUVsZW1lbnQuYmluZCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jdXJyZW50Q2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkKFxuICAgICAgICB0aGlzLl9jYXJkSXNMaWtlZEJ5TWUsXG4gICAgICAgIHRoaXMuX2NhcmREYXRhLl9pZCxcbiAgICAgICAgdGhpcy5fY3VycmVudENhcmRMaWtlQ291bnRlcixcbiAgICAgICAgdGhpcy5fc2V0TGlrZUJ0blN0YXRlLmJpbmQodGhpcylcbiAgICAgICk7XG4gICAgfSk7XG4gIH1cblxuICAvL9C80LXRgtC+0LQg0YTQvtGA0LzQuNGA0L7QstCw0L3QuNGPIERPTS3RjdC70LXQvNC10L3RgtCwINC60LDRgNGC0L7Rh9C60Lgg0LjQtyB0ZW1wbGF0ZSDQuCDQvdCw0LLQtdGI0LjQstCw0L3QuNC1INGB0LvRg9GI0LDRgtC10LvQtdC5XG4gIGNyZWF0ZUVsZW1lbnROb2RlKCkge1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gdGhpcy5fdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIikuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgdGhpcy5fY3VycmVudENhcmROYW1lID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19jYXB0aW9uXCIpO1xuICAgIHRoaXMuX2N1cnJlbnRDYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLm5hbWU7XG5cbiAgICB0aGlzLl9jdXJyZW50Q2FyZFBpY3R1cmUgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2N1cnJlbnRDYXJkUGljdHVyZS5hbHQgPSB0aGlzLl9jYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2N1cnJlbnRDYXJkUGljdHVyZS5zcmMgPSB0aGlzLl9jYXJkRGF0YS5saW5rO1xuXG4gICAgdGhpcy5fY3VycmVudENhcmRMaWtlQ291bnRlciA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudFwiKTtcbiAgICB0aGlzLl9jdXJyZW50Q2FyZExpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZERhdGEubGlrZXMubGVuZ3RoO1xuXG4gICAgdGhpcy5fY3VycmVudENhcmRMaWtlQnRuID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9saWtlXCIpO1xuXG4gICAgdGhpcy5fY2FyZElzTGlrZWRCeU1lID0gdGhpcy5fY2FyZERhdGEubGlrZXMuc29tZSgodXNlckRhdGEpID0+IHtcbiAgICAgIHJldHVybiB1c2VyRGF0YS5faWQgPT0gdGhpcy5fbXlJZGVudGlmaWNhdG9yO1xuICAgIH0pO1xuICAgIGlmICh0aGlzLl9jYXJkSXNMaWtlZEJ5TWUpIHtcbiAgICAgIHRoaXMuX3NldExpa2VCdG5TdGF0ZSh0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50RGVsZXRlQnV0dG9uID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9kZWxldGVcIik7XG4gICAgaWYgKHRoaXMuX2NhcmREYXRhLm93bmVyLl9pZCAhPT0gdGhpcy5fbXlJZGVudGlmaWNhdG9yKSB7XG4gICAgICB0aGlzLl9jdXJyZW50RGVsZXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidXR0b25faGlkZGVuXCIpO1xuICAgIH1cblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIG5ld0NhcmRQb3B1cCxcbiAgcG9wdXBXaXRoSW1hZ2UsXG4gIHByb2ZpbGVQb3B1cCxcbiAgdXNlckluZm8sXG4gIHByb2ZpbGVQb3B1cFZhbGlkYXRlLFxuICBuZXdDYXJkUG9wdXBWYWxpZGF0ZSxcbiAgY29uZmlybWF0aW9uUG9wdXAsXG4gIGFwaSxcbn0gZnJvbSBcIi4uL3NjcmlwdHMvaW5kZXguanNcIjtcblxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcblxuLy/RhNGD0L3QutGG0LjRjy3QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1IGVkaXQgKNC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y8pXG5leHBvcnQgY29uc3QgaGFuZGxlUHJvZmlsZUVkaXRCdG5DbGljayA9ICgpID0+IHtcbiAgY29uc3QgdXNlckRhdGFGcm9tUGFnZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG5cbiAgLy/RgyDQuNC90L/Rg9GC0L7QsiDRgtC10L/QtdGA0Ywg0LXRgdGC0Ywg0LDRgtGA0LjQsdGD0YIgbmFtZSwg0LrQvtGC0L7RgNGL0Lkg0YHQvtGH0LXRgtCw0LXRgtGB0Y8g0YFcbiAgLy/QvdCw0LfQstCw0L3QuNGP0LzQuCDRgdCy0L7QudGB0YLQsiDQvtCx0YrQtdC60YLQsCB1c2VyRGF0YSwg0L/QvtC70YPRh9Cw0LXQvNC+0LPQviDQuNC3INC60LvQsNGB0YHQsCBVc2VySW5mbyDQvNC10YLQvtC00L7QvCBnZXRVc2VySW5mb1xuICBwcm9maWxlUG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckRhdGFGcm9tUGFnZSk7XG5cbiAgcHJvZmlsZVBvcHVwVmFsaWRhdGUuY2xlYXJFcnJvck1lc3NhZ2VzKCk7XG4gIHByb2ZpbGVQb3B1cFZhbGlkYXRlLnNldFN1Ym1pdEJ0blN0YXRlKCk7XG5cbiAgcHJvZmlsZVBvcHVwLm9wZW4oKTtcbn07XG5cbi8v0YTRg9C90LrRhtC40Y8t0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQv9C+INC60L3QvtC/0LrQtSBhZGQgKNC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC00L7QsdCw0LLQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LgpXG5leHBvcnQgY29uc3QgaGFuZGxlTmV3Q2FyZEFkZEJ0bkNsaWNrID0gKCkgPT4ge1xuICBwcm9maWxlUG9wdXBWYWxpZGF0ZS5jbGVhckVycm9yTWVzc2FnZXMoKTtcbiAgbmV3Q2FyZFBvcHVwVmFsaWRhdGUuc2V0U3VibWl0QnRuU3RhdGUoKTtcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcbn07XG5cbi8v0YTRg9C90LrRhtC40Y8t0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQv9C+INC60LDRgNGC0LjQvdC60LUgKNC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC/0YDQvtGB0LzQvtGC0YDQsCDQutCw0YDRgtC40L3QutC4KVxuZXhwb3J0IGNvbnN0IGhhbmRsZU9uQ2FyZENsaWNrID0gKGNhcmROYW1lLCBjYXJkUGljU3JjKSA9PiB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oY2FyZE5hbWUsIGNhcmRQaWNTcmMpO1xufTtcblxuLy/RhNGD0L3QutGG0LjRjy3QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1INGD0LTQsNC70LXQvdC40Y8gKNC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwINC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuClcbmNvbnN0IGhhbmRsZURlbGV0ZUJ0bkNsaWNrID0gKGNhcmRJZCwgZGVsZXRlQ3VycmVudERvbUVsZW1lbnQpID0+IHtcbiAgY29uZmlybWF0aW9uUG9wdXAub3BlbigpO1xuICBjb25maXJtYXRpb25Qb3B1cFxuICAgIC53YWl0VW50aWxDbG9zZWQoKVxuICAgIC50aGVuKChpc0NvbmZpcm1lZCkgPT4ge1xuICAgICAgaWYgKGlzQ29uZmlybWVkKSB7XG4gICAgICAgIHJldHVybiBhcGkuc2VuZNChYXJkRGVsZXRlUmVxdWVzdChjYXJkSWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGZhbHNlKTtcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgZGVsZXRlQ3VycmVudERvbUVsZW1lbnQoKTtcbiAgICAgICAgY29uZmlybWF0aW9uUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIGNvbmZpcm1hdGlvblBvcHVwLmNsb3NlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaCgoZmFsc2VGcm9tUG9wdXBDbG9zZWQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2ZhbHNlRnJvbVBvcHVwQ2xvc2VkfTog0L/QtdGA0LXQtNGD0LzQsNC7INGD0LTQsNC70Y/RgtGMYCk7XG4gICAgfSk7XG59O1xuXG4vL9C80LXRgtC+0LQt0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQvtCx0LDQstC70LXQvdC40Y8gbGlrZSDQvdCwINC60LDRgNGC0L7Rh9C60LVcbmNvbnN0IGhhbmRsZUxpa2VDYXJkID0gKFxuICBpc0NhcmRBbHJlYWR5TGlrZWRCeU1lLFxuICBjYXJkSWQsXG4gIGNvdW50ZXJPZkxpa2VzRWxlbWVudCxcbiAgc2V0TGlrZUJ0blN0YXRlT2ZDdXJyZW50Q2FyZFxuKSA9PiB7XG4gIFByb21pc2UucmVzb2x2ZSgpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgaWYgKCFpc0NhcmRBbHJlYWR5TGlrZWRCeU1lKSB7XG4gICAgICAgIHJldHVybiBhcGkuc2VuZFNldExpa2VSZXF1ZXN0KGNhcmRJZCkudGhlbigoY2FyZERhdGFGcm9tU2VydmVyKSA9PiB7XG4gICAgICAgICAgc2V0TGlrZUJ0blN0YXRlT2ZDdXJyZW50Q2FyZCh0cnVlKTtcbiAgICAgICAgICByZXR1cm4gY2FyZERhdGFGcm9tU2VydmVyO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhcGkuc2VuZFJlbW92ZUxpa2VSZXF1ZXN0KGNhcmRJZCkudGhlbigoY2FyZERhdGFGcm9tU2VydmVyKSA9PiB7XG4gICAgICAgICAgc2V0TGlrZUJ0blN0YXRlT2ZDdXJyZW50Q2FyZChmYWxzZSk7XG4gICAgICAgICAgcmV0dXJuIGNhcmREYXRhRnJvbVNlcnZlcjtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbigoY2FyZERhdGFGcm9tU2VydmVyKSA9PiB7XG4gICAgICBjb3VudGVyT2ZMaWtlc0VsZW1lbnQudGV4dENvbnRlbnQgPSBjYXJkRGF0YUZyb21TZXJ2ZXIubGlrZXMubGVuZ3RoO1xuICAgIH0pO1xufTtcblxuLy/RhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LgoRE9NLdGN0LvQtdC80LXQvdGC0LApINC90LAg0L7RgdC90L7QstC1INC60LvQsNGB0YHQsFxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEsIG15SWRlbnRpZmljYXRvcikgPT4ge1xuICBjb25zdCDRgWFyZEluc3RhbmNlID0gbmV3IENhcmQoe1xuICAgIGNhcmREYXRhOiBjYXJkRGF0YSxcbiAgICB0ZW1wbGF0ZVNlbGVjdG9yOiBcIi50ZW1wbGF0ZV90eXBlX2NhcmRcIixcbiAgICBteUlkZW50aWZpY2F0b3I6IG15SWRlbnRpZmljYXRvcixcbiAgICBoYW5kbGVPbkNhcmRDbGljazogaGFuZGxlT25DYXJkQ2xpY2ssXG4gICAgaGFuZGxlRGVsZXRlQnRuQ2xpY2s6IGhhbmRsZURlbGV0ZUJ0bkNsaWNrLFxuICAgIGhhbmRsZUxpa2VDYXJkOiBoYW5kbGVMaWtlQ2FyZCxcbiAgfSk7XG4gIHJldHVybiDRgWFyZEluc3RhbmNlLmNyZWF0ZUVsZW1lbnROb2RlKCk7XG59O1xuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX3ZhbGlkYXRpb25Db25maWcgPSB2YWxpZGF0aW9uQ29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0LrQsNC30YvQstCw0LXQvCDQutGA0LDRgdC90YvQtSDQvtGI0LjQsdC60Lgg0YMg0LjQvdC/0YPRgtCwXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgfTtcclxuXHJcbiAgLy/Rg9Cx0LjRgNCw0LXQvCDQutGA0LDRgdC90YvQtSDQvtGI0LjQsdC60Lgg0YMg0LjQvdC/0YPRgtCwXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICAvL9C/0YDQvtCy0LXRgNGP0LXQvCDQstCw0LvQuNC00L3QvtGB0YLRjCDQuNC90L/Rg9GC0LBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPIGlucHV0INC4INC/0L7Qu9GP0YUg0LLQstC+0LTQsFxyXG4gIF9oYW5kbGVJbnB1dCA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgdGhpcy5zZXRTdWJtaXRCdG5TdGF0ZSgpO1xyXG4gIH07XHJcblxyXG4gIC8v0JLQtdGI0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQuCDRgdC+0LHRi9GC0LjRjyBJbnB1dCDQvdCwINCy0YHQtSDQv9C+0LvRjyDQstCy0L7QtNCwINC00LvRjyDQv9GA0L7QstC10YDRj9C10Lwg0LjRhSDQstCw0LvQuNC00L3QvtGB0YLQuCDQuCDRg9GB0YLQsNC90L7QstC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0LrQvdC+0L/QutC4IHN1Ym1pdFxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0YTRg9C90LrRhtC40Y8g0L7Rh9C40YHRgtC60Lgg0LLRgdC10YUg0YHQvtC+0LHRidC10L3QuNC5INGE0L7RgNC80Ysg0L7QsSDQvtGI0LjQsdC60LDRhSDQt9Cw0L/QvtC70L3QtdC90LjRjyDQuNC90L/Rg9GC0L7QslxyXG4gIGNsZWFyRXJyb3JNZXNzYWdlcyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0YTRg9C90LrRhtC40Y8g0YPRgdGC0LDQvdC+0LLQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60Lggc3VibWl0XHJcbiAgc2V0U3VibWl0QnRuU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuX2Zvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9Ck0YPQvdC60YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuC4g0JjRidC10Lwg0YTQvtGA0LzRgyDQsiDQv9C+0L/QsNC/0LUsINC4INCy0LXRiNCw0LXRgiDRgdC70YPRiNCw0YLQtdC70Lggc3VibWl0INC90LAg0L3QtdGRINC4INGB0LvRg9GI0LDRgtC10LvQuCBpbnB1dCDQvdCwINGN0LvQtdC80LXQvdGC0Ysg0YTQvtGA0LzRi1xyXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH07XHJcbn1cclxuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IG9wdGlvbnMucmVuZGVyZXI7XG5cbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9wdGlvbnMuY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaW5pdGlhbENhcmRzRnJvbVNlcnZlciwgbXlJZGVudGlmaWNhdG9yKSB7XG4gICAgaW5pdGlhbENhcmRzRnJvbVNlcnZlci5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtLCBteUlkZW50aWZpY2F0b3IpKTtcbiAgfVxuXG4gIGFkZEl0ZW1BZnRlckxhc3RPbmUoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gIH1cblxuICBhZGRJdGVtQmVmb3JlRmlyc3RPbmUoZWxlbWVudCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG5cbmV4cG9ydCB7IFNlY3Rpb24gfTtcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZSkge1xuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8v0YTRg9C90LrRhtC40Y8g0LfQsNC60YDRi9GC0LjRjyBwb3B1cCDQutC70LjQutCw0Y8g0L3QsCBPdmVybGF5ICjQsdC10Lcg0YHQvtGF0YDQsNC90LXQvdC40Y8pXG4gIF9oYW5kbGVQb3B1cE92ZXJsYXlDbGljayhlKSB7XG4gICAgaWYgKGUuY3VycmVudFRhcmdldCA9PSBlLnRhcmdldCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVQb3B1YkNsb3NlQnRuQ2xpY2soKSB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgY2xvc2VCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2Nsb3NlXCIpO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVQb3B1YkNsb3NlQnRuQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZVBvcHVwT3ZlcmxheUNsaWNrLmJpbmQodGhpcykpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpOyAvL9Cy0LXRiNCw0LXQvCDRgdC70YPRiNCw0YLQtdC70YwgRXNjXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpOyAvL9GB0L3QuNC80LDQtdC8INGB0LvRg9GI0LDRgtC10LvRjCBFc2NcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuaW1nUG9wdXBJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuaW1nUG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oY2FyZE5hbWUsIGNhcmRQaWNTcmMpIHtcclxuICAgIHRoaXMuaW1nUG9wdXBJbWFnZUVsZW1lbnQuYWx0ID0gY2FyZE5hbWU7XHJcbiAgICB0aGlzLmltZ1BvcHVwSW1hZ2VFbGVtZW50LnNyYyA9IGNhcmRQaWNTcmM7XHJcbiAgICB0aGlzLmltZ1BvcHVwQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmROYW1lO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWl0Rm9ybUZ1bmN0aW9uKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLnN1Ym1pdEZvcm1GdW5jdGlvbiA9IHN1Ym1pdEZvcm1GdW5jdGlvbjtcblxuICAgIHRoaXMuZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX3N1Ym1pdFwiKTtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfY2xvc2VcIik7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCArIFwiLi4uXCI7XG4gICAgfSBlbHNlIGlmICghaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQuc2xpY2UoMCwgLTMpO1xuICAgIH1cbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dHNWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0c1ZhbHVlc1tpbnB1dC5pZF0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzVmFsdWVzO1xuICB9XG5cbiAgX2hhbmRsZVN1Ym1pdEV2ZW50KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zdWJtaXRGb3JtRnVuY3Rpb24odGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIHRoaXMuX2hhbmRsZVN1Ym1pdEV2ZW50LmJpbmQodGhpcykpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLmZvcm0ucmVzZXQoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLmZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2Nsb3NlXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfc3VibWl0XCIpO1xuXG4gICAgdGhpcy5fcHJvbWlzZSA9IG51bGw7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCArIFwiLi4uXCI7XG4gICAgfSBlbHNlIGlmICghaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQuc2xpY2UoMCwgLTMpO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgc3VwZXIuX2hhbmRsZUVzY0Nsb3NlKGUpO1xuXG4gICAgaWYgKHRoaXMuX3Byb21pc2UgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX3Jlc29sdmVQcm9taXNlKGZhbHNlKTtcbiAgICAgIHRoaXMuX3Byb21pc2UgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVQb3B1YkNsb3NlQnRuQ2xpY2soKSB7XG4gICAgc3VwZXIuX2hhbmRsZVBvcHViQ2xvc2VCdG5DbGljaygpO1xuXG4gICAgaWYgKHRoaXMuX3Byb21pc2UgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX3Jlc29sdmVQcm9taXNlKGZhbHNlKTtcbiAgICAgIHRoaXMuX3Byb21pc2UgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIF9oYW5kbGVQb3B1cE92ZXJsYXlDbGljayhlKSB7XG4gICAgaWYgKGUuY3VycmVudFRhcmdldCA9PSBlLnRhcmdldCkge1xuICAgICAgaWYgKHRoaXMuX3Byb21pc2UgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVByb21pc2UoZmFsc2UpO1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZVN1Ym1pdEV2ZW50KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xuXG4gICAgaWYgKHRoaXMuX3Byb21pc2UgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX3Jlc29sdmVQcm9taXNlKHRydWUpO1xuICAgICAgdGhpcy5fcHJvbWlzZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgd2FpdFVudGlsQ2xvc2VkKCkge1xuICAgIGlmICh0aGlzLl9wcm9taXNlID09IG51bGwpIHtcbiAgICAgIHRoaXMuX3Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcHJvbWlzZTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0RXZlbnQuYmluZCh0aGlzKSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZUFib3V0U2VsZWN0b3IsIHByb2ZpbGVBdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fcHJvZmlsZUFib3V0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLnByb2ZpbGVBdmF0YXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0ge307XG4gICAgLy9cInByb2ZpbGVOYW1lXCIg0LggXCJwcm9maWxlQWJvdXRcIiDQv9GA0L7Qv9C40YHQsNC90Ysg0LIgbmFtZSDQuNC90L/Rg9GC0L7QsiDQv9C+0L/QsNC/0LAgcG9wdXBfdHlwZV9wcm9maWxlXG4gICAgLy/Rh9GC0L7QsdGLINGB0LLRj9C30LDRgtGMINGBINC80LXRgtC+0LTQvtC8IHNldElucHV0VmFsdWVzINC60LvQsNGB0YHQsCBQb3B1cFdpdGhGb3JtXG4gICAgdXNlckRhdGEucHJvZmlsZU5hbWUgPSB0aGlzLl9wcm9maWxlTmFtZUVsLnRleHRDb250ZW50O1xuICAgIHVzZXJEYXRhLnByb2ZpbGVBYm91dCA9IHRoaXMuX3Byb2ZpbGVBYm91dEVsLnRleHRDb250ZW50O1xuICAgIHJldHVybiB1c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIodXJsKSB7XG4gICAgdGhpcy5wcm9maWxlQXZhdGFyRWwuc3JjID0gdXJsO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICB0aGlzLl9wcm9maWxlTmFtZUVsLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wcm9maWxlQWJvdXRFbC50ZXh0Q29udGVudCA9IGFib3V0O1xuICB9XG59XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHtcbiAgdmFsaWRhdGlvbkNvbmZpZyxcbiAgdXNlckluZm9Db25maWcsXG4gIHByb2ZpbGVFZGl0QnRuLFxuICBuZXdDYXJkQWRkQnRuLFxuICBhcGlPcHRpb25zLFxuICBhdmF0YXJPdmVybGF5RWwsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbmltcG9ydCB7IGhhbmRsZVByb2ZpbGVFZGl0QnRuQ2xpY2ssIGhhbmRsZU5ld0NhcmRBZGRCdG5DbGljaywgY3JlYXRlQ2FyZCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpT3B0aW9ucyk7XG5cbmV4cG9ydCBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh1c2VySW5mb0NvbmZpZyk7XG5cbi8v0LjQvdGB0YLQsNC90YEg0L7RgtCy0LXRh9Cw0Y7RidC40Lkg0LfQsCDRgNCw0LHQvtGC0YMg0L/QvtC/0LDQv9CwINC/0YDQvtGB0LzQvtGC0YDQsCDQutCw0YDRgtC40L3QutC4XG5leHBvcnQgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8v0LjQvdGB0YLQsNC90YEg0L7RgtCy0LXRh9Cw0Y7RidC40Lkg0LfQsCDRgNCw0LHQvtGC0YMg0L/QvtC/0LDQv9CwINGB0L7Qt9C00LDQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XG5leHBvcnQgY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9uZXctY2FyZFwiLCAoaW5wdXRzVmFsdWVzKSA9PiB7XG4gIGNvbnN0IHBpY3R1cmVOYW1lRnJvbUlucHV0ID0gaW5wdXRzVmFsdWVzW1wiZm9ybV9faW5wdXRfdHlwZV9wbGFjZS1uYW1lXCJdO1xuICBjb25zdCBwaWN0dXJlTGlua0Zyb21JbnB1dCA9IGlucHV0c1ZhbHVlc1tcImZvcm1fX2lucHV0X3R5cGVfaW1hZ2UtbGlua1wiXTtcblxuICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgYXBpXG4gICAgLnNlbmROZXdDYXJkSW5mbyhwaWN0dXJlTmFtZUZyb21JbnB1dCwgcGljdHVyZUxpbmtGcm9tSW5wdXQpXG4gICAgLnRoZW4oKG15TmV3Q2FyZERhdGFGcm9tU2VydmVyKSA9PiB7XG4gICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQobXlOZXdDYXJkRGF0YUZyb21TZXJ2ZXIsIG15TmV3Q2FyZERhdGFGcm9tU2VydmVyLm93bmVyLl9pZCk7XG4gICAgICBlbGVtZW50c0NvbnRhaW5lci5hZGRJdGVtQmVmb3JlRmlyc3RPbmUobmV3Q2FyZEVsZW1lbnQpO1xuICAgICAgbmV3Q2FyZFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgfSk7XG59KTtcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9C40L3RgdGC0LDQvdGBINC+0YLQstC10YfQsNGO0YnQuNC5INC30LAg0YDQsNCx0L7RgtGDINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINCw0LLQsNGC0LDRgNC60LhcbmNvbnN0IGF2YXRhckVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfbmV3LWF2YXRhclwiLCAoaW5wdXRzVmFsdWVzKSA9PiB7XG4gIGNvbnN0IG5ld0F2YXRhclVybCA9IGlucHV0c1ZhbHVlc1tcImZvcm1fX2lucHV0X3R5cGVfYXZhdGFyLWxpbmtcIl07XG4gIGF2YXRhckVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkuc2VuZFVzZXJBdmF0YXIobmV3QXZhdGFyVXJsKS50aGVuKChyZXMpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xuICAgIGF2YXRhckVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICBhdmF0YXJFZGl0UG9wdXAuY2xvc2UoKTtcbiAgfSk7XG59KTtcbmF2YXRhckVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9C40L3RgdGC0LDQvdGBINC+0YLQstC10YfQsNGO0YnQuNC5INC30LAg0YDQsNCx0L7RgtGDINC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC00LDQvdC90YvRhSDQviDQv9GA0L7RhNC40LvQtVxuZXhwb3J0IGNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfcHJvZmlsZVwiLCAoaW5wdXRzVmFsdWVzKSA9PiB7XG4gIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGlcbiAgICAuc2VuZFVzZXJJbmZvKFxuICAgICAgaW5wdXRzVmFsdWVzW1wiZm9ybV9faW5wdXRfdHlwZV9wcm9maWxlLW5hbWVcIl0sXG4gICAgICBpbnB1dHNWYWx1ZXNbXCJmb3JtX19pbnB1dF90eXBlX3Byb2ZpbGUtYWJvdXRcIl1cbiAgICApXG4gICAgLnRoZW4oKHVzZXJEYXRhRnJvbVNlcnZlcikgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGFGcm9tU2VydmVyLm5hbWUsIHVzZXJEYXRhRnJvbVNlcnZlci5hYm91dCk7XG4gICAgICBwcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcbiAgICAgIHJldHVybiB1c2VyRGF0YUZyb21TZXJ2ZXI7XG4gICAgfSk7XG59KTtcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9C40L3RgdGC0LDQvdGBINC+0YLQstC10YfQsNGO0YnQuNC5INC30LAg0YDQsNCx0L7RgtGDINC/0L7Qv9Cw0L/QsCDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmV4cG9ydCBjb25zdCBjb25maXJtYXRpb25Qb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXCIucG9wdXBfdHlwZV9jb25maXJtYXRpb25cIik7XG5jb25maXJtYXRpb25Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL9GB0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGB0Ysg0LrQu9Cw0YHRgdCwINCy0LDQu9C40LTQsNGG0LjQuCDQtNC70Y8g0L/QvtC/0LDQv9C+0LIg0YEg0YTQvtGA0LzQsNC80LhcbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXBWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHByb2ZpbGVQb3B1cC5mb3JtKTtcbmV4cG9ydCBjb25zdCBuZXdDYXJkUG9wdXBWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIG5ld0NhcmRQb3B1cC5mb3JtKTtcbmV4cG9ydCBjb25zdCBuZXdBdmF0YXJQb3B1cFZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgYXZhdGFyRWRpdFBvcHVwLmZvcm0pO1xuXG4vL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuCjQstC10YjQsNC90LjQtSDRgdC70YPRiNCw0YLQtdC70LXQuSDQv9C+INGB0YPRgtC4KVxucHJvZmlsZVBvcHVwVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xubmV3Q2FyZFBvcHVwVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xubmV3QXZhdGFyUG9wdXBWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8v0LLQtdGI0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQuCDQvdCwINC+0YHQvdC+0LLQvdGL0LUg0LTQstC1INC60L3QvtC/0LrQuCArINCw0LLQsNGC0LDRgCDQvdCwINC+0YHQvdC+0LLQvdC+0Lkg0YHRgtGA0LDQvdC40YbQtVxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVByb2ZpbGVFZGl0QnRuQ2xpY2spO1xubmV3Q2FyZEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlTmV3Q2FyZEFkZEJ0bkNsaWNrKTtcbmF2YXRhck92ZXJsYXlFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL9GB0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCBTZWN0aW9uINC00LvRjyDQvtGC0YDQuNGB0L7QstGL0LLQsNC90LjRjyDQutCw0YDRgtC+0YfQtdC6XG5jb25zdCBlbGVtZW50c0NvbnRhaW5lciA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChpbml0aWFsQ2FyZHNJdGVtLCBteUlkZW50aWZpY2F0b3IpID0+IHtcbiAgICBjb25zdCDRgWFyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGluaXRpYWxDYXJkc0l0ZW0sIG15SWRlbnRpZmljYXRvcik7XG4gICAgZWxlbWVudHNDb250YWluZXIuYWRkSXRlbUFmdGVyTGFzdE9uZSjRgWFyZEVsZW1lbnQpO1xuICB9LFxuICBjb250YWluZXJTZWxlY3RvcjogXCIuZWxlbWVudHNfX2xpc3RcIixcbn0pO1xuXG4vL9GB0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCBTZWN0aW9uINC00LvRjyDQvtGC0YDQuNGB0L7QstGL0LLQsNC90LjRjyDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y9cbmNvbnN0IHByb2ZpbGVDb250YWluZXIgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAodXNlckRhdGFGcm9tU2VydmVyKSA9PiB7XG4gICAgY29uc3QgZG9tRWxlbWVudHMgPSBjcmVhdGVQcm9maWxlU2VjdGlvbih1c2VyRGF0YUZyb21TZXJ2ZXIpO1xuICAgIHByb2ZpbGVDb250YWluZXIuYWRkSXRlbUFmdGVyTGFzdE9uZShkb21FbGVtZW50cyk7XG4gIH0sXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBcIi5wcm9maWxlXCIsXG59KTtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJEYXRhRnJvbVNlcnZlciwgaW5pdGlhbENhcmRzRnJvbVNlcnZlcl0pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YUZyb21TZXJ2ZXIubmFtZSwgdXNlckRhdGFGcm9tU2VydmVyLmFib3V0KTtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhRnJvbVNlcnZlci5hdmF0YXIpO1xuICAgIGVsZW1lbnRzQ29udGFpbmVyLnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkc0Zyb21TZXJ2ZXIsIHVzZXJEYXRhRnJvbVNlcnZlci5faWQpO1xuXG4gICAgcmV0dXJuIHVzZXJEYXRhRnJvbVNlcnZlcjtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcbiAgfSk7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJwcm9maWxlRWRpdEJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm5ld0NhcmRBZGRCdG4iLCJhdmF0YXJPdmVybGF5RWwiLCJBcGkiLCJvcHRpb25zIiwidGhpcyIsImJhc2VVcmwiLCJhdXRoVG9rZW4iLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwibGluayIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJhdmF0YXJVcmwiLCJhdmF0YXIiLCJjYXJkSWQiLCJDYXJkIiwiX2NhcmREYXRhIiwiY2FyZERhdGEiLCJfdGVtcGxhdGUiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiX215SWRlbnRpZmljYXRvciIsIm15SWRlbnRpZmljYXRvciIsIl9oYW5kbGVPbkNhcmRDbGljayIsImhhbmRsZU9uQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUJ0bkNsaWNrIiwiaGFuZGxlRGVsZXRlQnRuQ2xpY2siLCJfaGFuZGxlTGlrZUNhcmQiLCJoYW5kbGVMaWtlQ2FyZCIsImlzTGlrZWQiLCJfY3VycmVudENhcmRMaWtlQnRuIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2NhcmRJc0xpa2VkQnlNZSIsInJlbW92ZSIsIl9jdXJyZW50RWxlbWVudCIsIl9jdXJyZW50Q2FyZFBpY3R1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2ltYWdlRGVsZXRlQnRuIiwiX2lkIiwiX2RlbGV0ZURvbUVsZW1lbnQiLCJiaW5kIiwiX2N1cnJlbnRDYXJkTGlrZUNvdW50ZXIiLCJfc2V0TGlrZUJ0blN0YXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9jdXJyZW50Q2FyZE5hbWUiLCJ0ZXh0Q29udGVudCIsImFsdCIsInNyYyIsImxpa2VzIiwibGVuZ3RoIiwic29tZSIsInVzZXJEYXRhIiwiX2N1cnJlbnREZWxldGVCdXR0b24iLCJvd25lciIsIl9zZXRFdmVudExpc3RlbmVycyIsImNhcmROYW1lIiwiY2FyZFBpY1NyYyIsInBvcHVwV2l0aEltYWdlIiwib3BlbiIsImRlbGV0ZUN1cnJlbnREb21FbGVtZW50IiwiY29uZmlybWF0aW9uUG9wdXAiLCJpc0NvbmZpcm1lZCIsImFwaSIsInJlbmRlckxvYWRpbmciLCJjbG9zZSIsImZhbHNlRnJvbVBvcHVwQ2xvc2VkIiwiaXNDYXJkQWxyZWFkeUxpa2VkQnlNZSIsImNvdW50ZXJPZkxpa2VzRWxlbWVudCIsInNldExpa2VCdG5TdGF0ZU9mQ3VycmVudENhcmQiLCJyZXNvbHZlIiwic2VuZFJlbW92ZUxpa2VSZXF1ZXN0IiwiY2FyZERhdGFGcm9tU2VydmVyIiwic2VuZFNldExpa2VSZXF1ZXN0IiwiY3JlYXRlQ2FyZCIsImNyZWF0ZUVsZW1lbnROb2RlIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJfZXJyb3JFbGVtZW50IiwiX2Zvcm0iLCJpZCIsIl92YWxpZGF0aW9uQ29uZmlnIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInNldFN1Ym1pdEJ0blN0YXRlIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiX2hhbmRsZUlucHV0IiwiY2hlY2tWYWxpZGl0eSIsIl9zdWJtaXRCdG4iLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJTZWN0aW9uIiwiX3JlbmRlcmVyIiwicmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpbml0aWFsQ2FyZHNGcm9tU2VydmVyIiwiaXRlbSIsImVsZW1lbnQiLCJhcHBlbmQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiZSIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJfaGFuZGxlUG9wdWJDbG9zZUJ0bkNsaWNrIiwiX2hhbmRsZVBvcHVwT3ZlcmxheUNsaWNrIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiaW1nUG9wdXBJbWFnZUVsZW1lbnQiLCJpbWdQb3B1cENhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybUZ1bmN0aW9uIiwiX3N1Ym1pdEJ1dHRvbiIsIl9jbG9zZUJ1dHRvbiIsImlzTG9hZGluZyIsInNsaWNlIiwiaW5wdXRzVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiZGF0YSIsIl9oYW5kbGVTdWJtaXRFdmVudCIsInJlc2V0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX3Byb21pc2UiLCJfcmVzb2x2ZVByb21pc2UiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lU2VsZWN0b3IiLCJwcm9maWxlQWJvdXRTZWxlY3RvciIsInByb2ZpbGVBdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlTmFtZUVsIiwiX3Byb2ZpbGVBYm91dEVsIiwicHJvZmlsZUF2YXRhckVsIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlQWJvdXQiLCJ1cmwiLCJ1c2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwibmV3Q2FyZFBvcHVwIiwicGljdHVyZU5hbWVGcm9tSW5wdXQiLCJwaWN0dXJlTGlua0Zyb21JbnB1dCIsInNlbmROZXdDYXJkSW5mbyIsIm15TmV3Q2FyZERhdGFGcm9tU2VydmVyIiwibmV3Q2FyZEVsZW1lbnQiLCJlbGVtZW50c0NvbnRhaW5lciIsImFkZEl0ZW1CZWZvcmVGaXJzdE9uZSIsImF2YXRhckVkaXRQb3B1cCIsIm5ld0F2YXRhclVybCIsInNlbmRVc2VyQXZhdGFyIiwic2V0VXNlckF2YXRhciIsInByb2ZpbGVQb3B1cCIsInNlbmRVc2VySW5mbyIsInVzZXJEYXRhRnJvbVNlcnZlciIsInNldFVzZXJJbmZvIiwicHJvZmlsZVBvcHVwVmFsaWRhdGUiLCJuZXdDYXJkUG9wdXBWYWxpZGF0ZSIsIm5ld0F2YXRhclBvcHVwVmFsaWRhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwidXNlckRhdGFGcm9tUGFnZSIsImdldFVzZXJJbmZvIiwic2V0SW5wdXRWYWx1ZXMiLCJjbGVhckVycm9yTWVzc2FnZXMiLCJpbml0aWFsQ2FyZHNJdGVtIiwi0YFhcmRFbGVtZW50IiwiYWRkSXRlbUFmdGVyTGFzdE9uZSIsInByb2ZpbGVDb250YWluZXIiLCJkb21FbGVtZW50cyIsImNyZWF0ZVByb2ZpbGVTZWN0aW9uIiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwicmVuZGVySXRlbXMiXSwic291cmNlUm9vdCI6IiJ9