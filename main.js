(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{hi:()=>Y,$z:()=>ee,ON:()=>W,L1:()=>ne,lH:()=>Q,Ph:()=>Z,Kc:()=>te,eY:()=>G});var t={inputSelector:".form__input",submitButtonSelector:".button_type_submit",inactiveButtonClass:"button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"},n=document.querySelector(".button_type_edit"),r=document.querySelector(".button_type_add"),o=document.querySelector(".profile__avatar-overlay");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.authToken=t.headers.authorization}var t,n;return t=e,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendNewCardInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendUserInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendUserAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendСardDeleteRequest",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.ok:Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendSetLikeRequest",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}},{key:"sendRemoveLikeRequest",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{authorization:this.authToken}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)})).catch((function(e){console.log("Ошибка api: ".concat(e))}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardData=t.cardData,this._template=document.querySelector(t.templateSelector),this._myIdentificator=t.myIdentificator,this._handleOnCardClick=t.handleOnCardClick,this._handleDeleteBtnClick=t.handleDeleteBtnClick,this._handleLikeCard=t.handleLikeCard}var t,n;return t=e,(n=[{key:"_setLikeBtnState",value:function(e){e?(this._currentCardLikeBtn.classList.add("button_active"),this._cardIsLikedByMe=!0):(this._currentCardLikeBtn.classList.remove("button_active"),this._cardIsLikedByMe=!1)}},{key:"_deleteDomElement",value:function(){this._currentElement.remove(),this._currentElement=null}},{key:"_setEventListeners",value:function(){var e=this;this._currentCardPicture.addEventListener("click",(function(){return e._handleOnCardClick(e._cardData.name,e._cardData.link)})),this._imageDeleteBtn=this._currentElement.querySelector(".button_type_delete"),this._imageDeleteBtn.addEventListener("click",(function(){e._handleDeleteBtnClick(e._cardData._id,e._deleteDomElement.bind(e))})),this._currentCardLikeBtn.addEventListener("click",(function(){e._handleLikeCard(e._cardIsLikedByMe,e._cardData._id,e._currentCardLikeCounter,e._setLikeBtnState.bind(e))}))}},{key:"createElementNode",value:function(){var e=this;return this._currentElement=this._template.content.querySelector(".element").cloneNode(!0),this._currentCardName=this._currentElement.querySelector(".element__caption"),this._currentCardName.textContent=this._cardData.name,this._currentCardPicture=this._currentElement.querySelector(".element__image"),this._currentCardPicture.alt=this._cardData.name,this._currentCardPicture.src=this._cardData.link,this._currentCardLikeCounter=this._currentElement.querySelector(".element__like-count"),this._currentCardLikeCounter.textContent=this._cardData.likes.length,this._currentCardLikeBtn=this._currentElement.querySelector(".button_type_like"),this._cardIsLikedByMe=this._cardData.likes.some((function(t){return t._id==e._myIdentificator})),this._cardIsLikedByMe&&this._setLikeBtnState(!0),this._currentDeleteButton=this._currentElement.querySelector(".button_type_delete"),this._cardData.owner._id!==this._myIdentificator&&this._currentDeleteButton.classList.add("button_hidden"),this._setEventListeners(),this._currentElement}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),s=function(e,t){Q.open(e,t)},l=function(e,t){ee.open(),ee.waitUntilClosed().then((function(t){return t?Y["sendСardDeleteRequest"](e):Promise.reject(!1)})).then((function(e){if(e)return t(),ee.renderLoading(!1),void ee.close()})).catch((function(e){console.log("".concat(e,": передумал удалять"))}))},f=function(e,t,n,r){Promise.resolve().then((function(){return e?Y.sendRemoveLikeRequest(t).then((function(e){return r(!1),e})):Y.sendSetLikeRequest(t).then((function(e){return r(!0),e}))})).then((function(e){n.textContent=e.likes.length}))},p=function(e,t){return new u({cardData:e,templateSelector:".template_type_card",myIdentificator:t,handleOnCardClick:s,handleDeleteBtnClick:l,handleLikeCard:f}).createElementNode()};function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=d((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_showInputError",(function(e,t){r._errorElement=r._form.querySelector("#".concat(e.id,"-error")),e.classList.add(r._validationConfig.inputErrorClass),r._errorElement.classList.add(r._validationConfig.errorClass),r._errorElement.textContent=t})),y(this,"_hideInputError",(function(e){r._errorElement=r._form.querySelector("#".concat(e.id,"-error")),e.classList.remove(r._validationConfig.inputErrorClass),r._errorElement.classList.remove(r._validationConfig.errorClass),r._errorElement.textContent=""})),y(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),y(this,"_handleInput",(function(e){r._checkInputValidity(e),r.setSubmitBtnState()})),y(this,"_setEventListeners",(function(){r._inputList=Array.from(r._form.querySelectorAll(r._validationConfig.inputSelector)),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._handleInput(e)}))}))})),y(this,"clearErrorMessages",(function(){r._inputList.forEach((function(e){r._hideInputError(e)}))})),y(this,"setSubmitBtnState",(function(){r._form.checkValidity()?(r._submitBtn.removeAttribute("disabled"),r._submitBtn.classList.remove(r._validationConfig.inactiveButtonClass)):(r._submitBtn.setAttribute("disabled",!0),r._submitBtn.classList.add(r._validationConfig.inactiveButtonClass))})),y(this,"enableValidation",(function(){r._setEventListeners()})),this._validationConfig=t,this._form=n,this._submitBtn=this._form.querySelector(this._validationConfig.submitButtonSelector)}));function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t.renderer,this._container=document.querySelector(t.containerSelector)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e,t){var n=this;e.forEach((function(e){return n._renderer(e,t)}))}},{key:"addItemAfterLastOne",value:function(e){this._container.append(e)}},{key:"addItemBeforeFirstOne",value:function(e){this._container.prepend(e)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handlePopupOverlayClick",value:function(e){e.currentTarget==e.target&&this.close()}},{key:"_handlePopubCloseBtnClick",value:function(){this.close()}},{key:"setEventListeners",value:function(){this._popup.querySelector(".button_type_close").addEventListener("click",this._handlePopubCloseBtnClick.bind(this)),this._popup.addEventListener("click",this._handlePopupOverlayClick.bind(this))}},{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose.bind(this))}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose.bind(this))}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},C.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function S(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).imgPopupImageElement=t._popup.querySelector(".popup__image"),t.imgPopupCaption=t._popup.querySelector(".popup__image-caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this.imgPopupImageElement.alt=e,this.imgPopupImageElement.src=t,this.imgPopupCaption.textContent=e,C(P(a.prototype),"open",this).call(this)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function D(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e)).submitFormFunction=t,n.form=n._popup.querySelector(".form"),n._inputList=n.form.querySelectorAll(".form__input"),n._submitButton=n.form.querySelector(".button_type_submit"),n._closeButton=n._popup.querySelector(".button_type_close"),n}return t=a,(n=[{key:"renderLoading",value:function(e){e?this._submitButton.textContent=this._submitButton.textContent+"...":e||(this._submitButton.textContent=this._submitButton.textContent.slice(0,-3))}},{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.id]=t.value})),e}},{key:"_handleSubmitEvent",value:function(e){e.preventDefault(),this.submitFormFunction(this._getInputValues())}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){I(R(a.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",this._handleSubmitEvent.bind(this))}},{key:"close",value:function(){I(R(a.prototype),"close",this).call(this),this.form.reset()}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=z(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},N.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function M(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return M(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).form=t._popup.querySelector(".form"),t._closeButton=t._popup.querySelector(".button_type_close"),t._submitButton=t._popup.querySelector(".button_type_submit"),t._promise=null,t}return t=a,(n=[{key:"renderLoading",value:function(e){e?this._submitButton.textContent=this._submitButton.textContent+"...":e||(this._submitButton.textContent=this._submitButton.textContent.slice(0,-3))}},{key:"_handleEscClose",value:function(e){N(F(a.prototype),"_handleEscClose",this).call(this,e),null!==this._promise&&(this._resolvePromise(!1),this._promise=null)}},{key:"_handlePopubCloseBtnClick",value:function(){N(F(a.prototype),"_handlePopubCloseBtnClick",this).call(this),null!==this._promise&&(this._resolvePromise(!1),this._promise=null)}},{key:"_handlePopupOverlayClick",value:function(e){e.currentTarget==e.target&&(null!==this._promise&&(this._resolvePromise(!1),this._promise=null),N(F(a.prototype),"close",this).call(this))}},{key:"_handleSubmitEvent",value:function(e){e.preventDefault(),this.renderLoading(!0),null!==this._promise&&(this._resolvePromise(!0),this._promise=null)}},{key:"waitUntilClosed",value:function(){var e=this;return null==this._promise&&(this._promise=new Promise((function(t,n){e._resolvePromise=t}))),this._promise}},{key:"setEventListeners",value:function(){N(F(a.prototype),"setEventListeners",this).call(this),this.form.addEventListener("submit",this._handleSubmitEvent.bind(this))}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(k);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){var n=t.profileNameSelector,r=t.profileAboutSelector,o=t.profileAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameEl=document.querySelector(n),this._profileAboutEl=document.querySelector(r),this.profileAvatarEl=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.profileName=this._profileNameEl.textContent,e.profileAbout=this._profileAboutEl.textContent,e}},{key:"setUserAvatar",value:function(e){this.profileAvatarEl.src=e}},{key:"setUserInfo",value:function(e,t){this._profileNameEl.textContent=e,this._profileAboutEl.textContent=t}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Y=new a({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"8abcd093-addb-4bd1-b00f-f600aa41c00a","Content-Type":"application/json"}}),G=new $({profileNameSelector:".profile__name",profileAboutSelector:".profile__about",profileAvatarSelector:".profile__avatar"}),Q=new L(".popup_type_image");Q.setEventListeners();var W=new A(".popup_type_new-card",(function(e){var t=e["form__input_type_place-name"],n=e["form__input_type_image-link"];W.renderLoading(!0),Y.sendNewCardInfo(t,n).then((function(e){var t=p(e,e.owner._id);oe.addItemBeforeFirstOne(t),W.renderLoading(!1),W.close()}))}));W.setEventListeners();var X=new A(".popup_type_new-avatar",(function(e){var t=e["form__input_type_avatar-link"];X.renderLoading(!0),Y.sendUserAvatar(t).then((function(e){G.setUserAvatar(e.avatar),X.renderLoading(!1),X.close()}))}));X.setEventListeners();var Z=new A(".popup_type_profile",(function(e){Z.renderLoading(!0),Y.sendUserInfo(e["form__input_type_profile-name"],e["form__input_type_profile-about"]).then((function(e){return G.setUserInfo(e.name,e.about),Z.renderLoading(!1),Z.close(),e}))}));Z.setEventListeners();var ee=new H(".popup_type_confirmation");ee.setEventListeners();var te=new _(t,Z.form),ne=new _(t,W.form),re=new _(t,X.form);te.enableValidation(),ne.enableValidation(),re.enableValidation(),n.addEventListener("click",(function(){var e=G.getUserInfo();Z.setInputValues(e),te.clearErrorMessages(),te.setSubmitBtnState(),Z.open()})),r.addEventListener("click",(function(){te.clearErrorMessages(),ne.setSubmitBtnState(),W.open()})),o.addEventListener("click",(function(e){X.open()}));var oe=new b({renderer:function(e,t){var n=p(e,t);oe.addItemAfterLastOne(n)},containerSelector:".elements__list"}),ie=new b({renderer:function(e){var t=createProfileSection(e);ie.addItemAfterLastOne(t)},containerSelector:".profile"});Promise.all([Y.getUserInfo(),Y.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return G.setUserInfo(o.name,o.about),G.setUserAvatar(o.avatar),oe.renderItems(i,o._id),o})).catch((function(e){console.log("Ошибка: ".concat(e))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QXNCLEtBS2hELE9BSkE2QyxFQUFTaUIsWUFBWUQsRUFBbUJsSyxLQUFNa0ssRUFBbUI1SixPQUNqRTRJLEVBQVNhLGNBQWNHLEVBQW1CMUosUUFDMUNrSixHQUFrQjBCLFlBQVkvRSxFQUF3QjZELEVBQW1CakksS0FFbEVpSSxDQUNULElBQ0N0SyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUksV0FBRCxPQUFZRixHQUN6QixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGNvbnN0IGFwaU9wdGlvbnMgPSB7XHJcbiAgYmFzZVVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTU1XCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI4YWJjZDA5My1hZGRiLTRiZDEtYjAwZi1mNjAwYWE0MWMwMGFcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICAvL9GB0LXQu9C10LrRgtC+0YDRiyDRgSDRgtC+0YfQutC+0Lkg0LIg0L3QsNGH0LDQu9C1OlxyXG4gIC8vZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsINC90LUg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICAvL2Vycm9yU2VsZWN0b3I6IFwiLmZvcm1fX2Vycm9yXCIsINC90LUg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmJ1dHRvbl90eXBlX3N1Ym1pdFwiLFxyXG5cclxuICAvL9C60LvQsNGB0YHRiyDQsdC10Lcg0YLQvtGH0LrQuCDQsiDQvdCw0YfQsNC70LU6XHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJidXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvQ29uZmlnID0ge1xyXG4gIHByb2ZpbGVOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBwcm9maWxlQWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fYWJvdXRcIixcclxuICBwcm9maWxlQXZhdGFyU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59O1xyXG5cclxuLy/QvdCw0YXQvtC00LjQvCDQutC90L7Qv9C60Lgg0L3QsCDRgdGC0YDQsNC90LjRhtC1XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IG5ld0NhcmRBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2FkZFwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhck92ZXJsYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXlcIik7XHJcbiIsImV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuYXV0aFRva2VuID0gb3B0aW9ucy5oZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgYXBpOiAke2Vycn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRoVG9rZW4sXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCBhcGk6ICR7ZXJyfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHNlbmROZXdDYXJkSW5mbyhuYW1lLCBsaW5rKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFRva2VuLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2VuZFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhUb2tlbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2VuZFVzZXJBdmF0YXIoYXZhdGFyVXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRoVG9rZW4sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGF2YXRhclVybCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCBhcGk6ICR7ZXJyfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHNlbmTQoWFyZERlbGV0ZVJlcXVlc3QoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMub2s7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwIGFwaTogJHtlcnJ9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2VuZFNldExpa2VSZXF1ZXN0KGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhUb2tlbixcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlcy5zdGF0dXMpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAgYXBpOiAke2Vycn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZW5kUmVtb3ZlTGlrZVJlcXVlc3QoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aFRva2VuLFxyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzLnN0YXR1cyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCBhcGk6ICR7ZXJyfWApO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2NhcmREYXRhID0gb3B0aW9ucy5jYXJkRGF0YTtcclxuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnRlbXBsYXRlU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX215SWRlbnRpZmljYXRvciA9IG9wdGlvbnMubXlJZGVudGlmaWNhdG9yO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZU9uQ2FyZENsaWNrID0gb3B0aW9ucy5oYW5kbGVPbkNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ0bkNsaWNrID0gb3B0aW9ucy5oYW5kbGVEZWxldGVCdG5DbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDYXJkID0gb3B0aW9ucy5oYW5kbGVMaWtlQ2FyZDtcclxuICB9XHJcblxyXG4gIF9zZXRMaWtlQnRuU3RhdGUoaXNMaWtlZCkge1xyXG4gICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgdGhpcy5fY3VycmVudENhcmRMaWtlQnRuLmNsYXNzTGlzdC5hZGQoXCJidXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICB0aGlzLl9jYXJkSXNMaWtlZEJ5TWUgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fY3VycmVudENhcmRMaWtlQnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJidXR0b25fYWN0aXZlXCIpO1xyXG4gICAgICB0aGlzLl9jYXJkSXNMaWtlZEJ5TWUgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9kZWxldGVEb21FbGVtZW50KCkge1xyXG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAvL9Cf0YDQuCDRg9C00LDQu9C10L3QuNC4INGN0LrQt9C10LzQv9C70Y/RgNCwINC60LvQsNGB0YHQsCDQtdCz0L4g0LTQvtC/0L7Qu9C90LjRgtC10LvRjNC90L4g0L/QvtGB0LvQtSDRg9C00LDQu9C10L3QuNGPINC90YPQttC90L4g0LfQsNC90YPQu9GP0YLRjC5cclxuICAgIC8vcmVtb3ZlINGD0LTQsNC70Y/QtdGCINGC0L7Qu9GM0LrQviDRgNCw0LfQvNC10YLQutGDINC40LcgaHRtbCwg0YHQsNC8INC+0LHRitC10LrRgiDQutCw0YDRgtC+0YfQutC4INC+0YHRgtCw0LXRgtGB0Y8g0LIg0L/QsNC80Y/RgtC4XHJcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jdXJyZW50Q2FyZFBpY3R1cmUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZU9uQ2FyZENsaWNrKHRoaXMuX2NhcmREYXRhLm5hbWUsIHRoaXMuX2NhcmREYXRhLmxpbmspXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlRGVsZXRlQnRuID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9kZWxldGVcIik7XHJcbiAgICB0aGlzLl9pbWFnZURlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdG5DbGljayh0aGlzLl9jYXJkRGF0YS5faWQsIHRoaXMuX2RlbGV0ZURvbUVsZW1lbnQuYmluZCh0aGlzKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jdXJyZW50Q2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNhcmQoXHJcbiAgICAgICAgdGhpcy5fY2FyZElzTGlrZWRCeU1lLFxyXG4gICAgICAgIHRoaXMuX2NhcmREYXRhLl9pZCxcclxuICAgICAgICB0aGlzLl9jdXJyZW50Q2FyZExpa2VDb3VudGVyLFxyXG4gICAgICAgIHRoaXMuX3NldExpa2VCdG5TdGF0ZS5iaW5kKHRoaXMpXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8v0LzQtdGC0L7QtCDRhNC+0YDQvNC40YDQvtCy0LDQvdC40Y8gRE9NLdGN0LvQtdC80LXQvdGC0LAg0LrQsNGA0YLQvtGH0LrQuCDQuNC3IHRlbXBsYXRlINC4INC90LDQstC10YjQuNCy0LDQvdC40LUg0YHQu9GD0YjQsNGC0LXQu9C10LlcclxuICBjcmVhdGVFbGVtZW50Tm9kZSgpIHtcclxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gdGhpcy5fdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHRoaXMuX2N1cnJlbnRDYXJkTmFtZSA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fY2FwdGlvblwiKTtcclxuICAgIHRoaXMuX2N1cnJlbnRDYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmREYXRhLm5hbWU7XHJcblxyXG4gICAgdGhpcy5fY3VycmVudENhcmRQaWN0dXJlID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2N1cnJlbnRDYXJkUGljdHVyZS5hbHQgPSB0aGlzLl9jYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY3VycmVudENhcmRQaWN0dXJlLnNyYyA9IHRoaXMuX2NhcmREYXRhLmxpbms7XHJcblxyXG4gICAgdGhpcy5fY3VycmVudENhcmRMaWtlQ291bnRlciA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudFwiKTtcclxuICAgIHRoaXMuX2N1cnJlbnRDYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkRGF0YS5saWtlcy5sZW5ndGg7XHJcblxyXG4gICAgdGhpcy5fY3VycmVudENhcmRMaWtlQnRuID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9saWtlXCIpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJc0xpa2VkQnlNZSA9IHRoaXMuX2NhcmREYXRhLmxpa2VzLnNvbWUoKHVzZXJEYXRhKSA9PiB7XHJcbiAgICAgIHJldHVybiB1c2VyRGF0YS5faWQgPT0gdGhpcy5fbXlJZGVudGlmaWNhdG9yO1xyXG4gICAgfSk7XHJcbiAgICBpZiAodGhpcy5fY2FyZElzTGlrZWRCeU1lKSB7XHJcbiAgICAgIHRoaXMuX3NldExpa2VCdG5TdGF0ZSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9jdXJyZW50RGVsZXRlQnV0dG9uID0gdGhpcy5fY3VycmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9kZWxldGVcIik7XHJcbiAgICBpZiAodGhpcy5fY2FyZERhdGEub3duZXIuX2lkICE9PSB0aGlzLl9teUlkZW50aWZpY2F0b3IpIHtcclxuICAgICAgdGhpcy5fY3VycmVudERlbGV0ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uX2hpZGRlblwiKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50RWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtcclxuICBuZXdDYXJkUG9wdXAsXHJcbiAgcG9wdXBXaXRoSW1hZ2UsXHJcbiAgcHJvZmlsZVBvcHVwLFxyXG4gIHVzZXJJbmZvLFxyXG4gIHByb2ZpbGVQb3B1cFZhbGlkYXRlLFxyXG4gIG5ld0NhcmRQb3B1cFZhbGlkYXRlLFxyXG4gIGNvbmZpcm1hdGlvblBvcHVwLFxyXG4gIGFwaSxcclxufSBmcm9tIFwiLi4vc2NyaXB0cy9pbmRleC5qc1wiO1xyXG5cclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuXHJcbi8v0YTRg9C90LrRhtC40Y8t0L7QsdGA0LDQsdC+0YLRh9C40Log0LrQu9C40LrQsCDQv9C+INC60L3QvtC/0LrQtSBlZGl0ICjQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPKVxyXG5leHBvcnQgY29uc3QgaGFuZGxlUHJvZmlsZUVkaXRCdG5DbGljayA9ICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YUZyb21QYWdlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuXHJcbiAgLy/RgyDQuNC90L/Rg9GC0L7QsiDRgtC10L/QtdGA0Ywg0LXRgdGC0Ywg0LDRgtGA0LjQsdGD0YIgbmFtZSwg0LrQvtGC0L7RgNGL0Lkg0YHQvtGH0LXRgtCw0LXRgtGB0Y8g0YFcclxuICAvL9C90LDQt9Cy0LDQvdC40Y/QvNC4INGB0LLQvtC50YHRgtCyINC+0LHRitC10LrRgtCwIHVzZXJEYXRhLCDQv9C+0LvRg9GH0LDQtdC80L7Qs9C+INC40Lcg0LrQu9Cw0YHRgdCwIFVzZXJJbmZvINC80LXRgtC+0LTQvtC8IGdldFVzZXJJbmZvXHJcbiAgcHJvZmlsZVBvcHVwLnNldElucHV0VmFsdWVzKHVzZXJEYXRhRnJvbVBhZ2UpO1xyXG5cclxuICBwcm9maWxlUG9wdXBWYWxpZGF0ZS5jbGVhckVycm9yTWVzc2FnZXMoKTtcclxuICBwcm9maWxlUG9wdXBWYWxpZGF0ZS5zZXRTdWJtaXRCdG5TdGF0ZSgpO1xyXG5cclxuICBwcm9maWxlUG9wdXAub3BlbigpO1xyXG59O1xyXG5cclxuLy/RhNGD0L3QutGG0LjRjy3QvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1IGFkZCAo0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuClcclxuZXhwb3J0IGNvbnN0IGhhbmRsZU5ld0NhcmRBZGRCdG5DbGljayA9ICgpID0+IHtcclxuICBwcm9maWxlUG9wdXBWYWxpZGF0ZS5jbGVhckVycm9yTWVzc2FnZXMoKTtcclxuICBuZXdDYXJkUG9wdXBWYWxpZGF0ZS5zZXRTdWJtaXRCdG5TdGF0ZSgpO1xyXG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XHJcbn07XHJcblxyXG4vL9GE0YPQvdC60YbQuNGPLdC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L/QviDQutCw0YDRgtC40L3QutC1ICjQvtGC0LrRgNGL0YLQuNC1INC/0L7Qv9Cw0L/QsCDQv9GA0L7RgdC80L7RgtGA0LAg0LrQsNGA0YLQuNC90LrQuClcclxuZXhwb3J0IGNvbnN0IGhhbmRsZU9uQ2FyZENsaWNrID0gKGNhcmROYW1lLCBjYXJkUGljU3JjKSA9PiB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkTmFtZSwgY2FyZFBpY1NyYyk7XHJcbn07XHJcblxyXG4vL9GE0YPQvdC60YbQuNGPLdC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0L/QviDQutC90L7Qv9C60LUg0YPQtNCw0LvQtdC90LjRjyAo0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LAg0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4KVxyXG5jb25zdCBoYW5kbGVEZWxldGVCdG5DbGljayA9IChjYXJkSWQsIGRlbGV0ZUN1cnJlbnREb21FbGVtZW50KSA9PiB7XHJcbiAgY29uZmlybWF0aW9uUG9wdXAub3BlbigpO1xyXG4gIGNvbmZpcm1hdGlvblBvcHVwXHJcbiAgICAud2FpdFVudGlsQ2xvc2VkKClcclxuICAgIC50aGVuKChpc0NvbmZpcm1lZCkgPT4ge1xyXG4gICAgICBpZiAoaXNDb25maXJtZWQpIHtcclxuICAgICAgICByZXR1cm4gYXBpLnNlbmTQoWFyZERlbGV0ZVJlcXVlc3QoY2FyZElkKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZmFsc2UpO1xyXG4gICAgfSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgIGRlbGV0ZUN1cnJlbnREb21FbGVtZW50KCk7XHJcbiAgICAgICAgY29uZmlybWF0aW9uUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgY29uZmlybWF0aW9uUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGZhbHNlRnJvbVBvcHVwQ2xvc2VkKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGAke2ZhbHNlRnJvbVBvcHVwQ2xvc2VkfTog0L/QtdGA0LXQtNGD0LzQsNC7INGD0LTQsNC70Y/RgtGMYCk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8v0LzQtdGC0L7QtC3QvtCx0YDQsNCx0L7RgtGH0LjQuiDQtNC+0LHQsNCy0LvQtdC90LjRjyBsaWtlINC90LAg0LrQsNGA0YLQvtGH0LrQtVxyXG5jb25zdCBoYW5kbGVMaWtlQ2FyZCA9IChcclxuICBpc0NhcmRBbHJlYWR5TGlrZWRCeU1lLFxyXG4gIGNhcmRJZCxcclxuICBjb3VudGVyT2ZMaWtlc0VsZW1lbnQsXHJcbiAgc2V0TGlrZUJ0blN0YXRlT2ZDdXJyZW50Q2FyZFxyXG4pID0+IHtcclxuICBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBpZiAoIWlzQ2FyZEFscmVhZHlMaWtlZEJ5TWUpIHtcclxuICAgICAgICByZXR1cm4gYXBpLnNlbmRTZXRMaWtlUmVxdWVzdChjYXJkSWQpLnRoZW4oKGNhcmREYXRhRnJvbVNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgc2V0TGlrZUJ0blN0YXRlT2ZDdXJyZW50Q2FyZCh0cnVlKTtcclxuICAgICAgICAgIHJldHVybiBjYXJkRGF0YUZyb21TZXJ2ZXI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5zZW5kUmVtb3ZlTGlrZVJlcXVlc3QoY2FyZElkKS50aGVuKChjYXJkRGF0YUZyb21TZXJ2ZXIpID0+IHtcclxuICAgICAgICAgIHNldExpa2VCdG5TdGF0ZU9mQ3VycmVudENhcmQoZmFsc2UpO1xyXG4gICAgICAgICAgcmV0dXJuIGNhcmREYXRhRnJvbVNlcnZlcjtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgIC50aGVuKChjYXJkRGF0YUZyb21TZXJ2ZXIpID0+IHtcclxuICAgICAgY291bnRlck9mTGlrZXNFbGVtZW50LnRleHRDb250ZW50ID0gY2FyZERhdGFGcm9tU2VydmVyLmxpa2VzLmxlbmd0aDtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy/RhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LgoRE9NLdGN0LvQtdC80LXQvdGC0LApINC90LAg0L7RgdC90L7QstC1INC60LvQsNGB0YHQsFxyXG5leHBvcnQgY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSwgbXlJZGVudGlmaWNhdG9yKSA9PiB7XHJcbiAgY29uc3Qg0YFhcmRJbnN0YW5jZSA9IG5ldyBDYXJkKHtcclxuICAgIGNhcmREYXRhOiBjYXJkRGF0YSxcclxuICAgIHRlbXBsYXRlU2VsZWN0b3I6IFwiLnRlbXBsYXRlX3R5cGVfY2FyZFwiLFxyXG4gICAgbXlJZGVudGlmaWNhdG9yOiBteUlkZW50aWZpY2F0b3IsXHJcbiAgICBoYW5kbGVPbkNhcmRDbGljazogaGFuZGxlT25DYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVCdG5DbGljazogaGFuZGxlRGVsZXRlQnRuQ2xpY2ssXHJcbiAgICBoYW5kbGVMaWtlQ2FyZDogaGFuZGxlTGlrZUNhcmQsXHJcbiAgfSk7XHJcbiAgcmV0dXJuINGBYXJkSW5zdGFuY2UuY3JlYXRlRWxlbWVudE5vZGUoKTtcclxufTtcclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm0pIHtcclxuICAgIHRoaXMuX3ZhbGlkYXRpb25Db25maWcgPSB2YWxpZGF0aW9uQ29uZmlnO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07XHJcblxyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy/Qv9C+0LrQsNC30YvQstCw0LXQvCDQutGA0LDRgdC90YvQtSDQvtGI0LjQsdC60Lgg0YMg0LjQvdC/0YPRgtCwXHJcbiAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgfTtcclxuXHJcbiAgLy/Rg9Cx0LjRgNCw0LXQvCDQutGA0LDRgdC90YvQtSDQvtGI0LjQsdC60Lgg0YMg0LjQvdC/0YPRgtCwXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uQ29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICB9O1xyXG5cclxuICAvL9C/0YDQvtCy0LXRgNGP0LXQvCDQstCw0LvQuNC00L3QvtGB0YLRjCDQuNC90L/Rg9GC0LBcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9C+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPIGlucHV0INC4INC/0L7Qu9GP0YUg0LLQstC+0LTQsFxyXG4gIF9oYW5kbGVJbnB1dCA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgdGhpcy5zZXRTdWJtaXRCdG5TdGF0ZSgpO1xyXG4gIH07XHJcblxyXG4gIC8v0JLQtdGI0LDQtdC8INGB0LvRg9GI0LDRgtC10LvQuCDRgdC+0LHRi9GC0LjRjyBJbnB1dCDQvdCwINCy0YHQtSDQv9C+0LvRjyDQstCy0L7QtNCwINC00LvRjyDQv9GA0L7QstC10YDRj9C10Lwg0LjRhSDQstCw0LvQuNC00L3QvtGB0YLQuCDQuCDRg9GB0YLQsNC90L7QstC60Lgg0LLQsNC70LjQtNC90L7RgdGC0Lgg0LrQvdC+0L/QutC4IHN1Ym1pdFxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25Db25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0YTRg9C90LrRhtC40Y8g0L7Rh9C40YHRgtC60Lgg0LLRgdC10YUg0YHQvtC+0LHRidC10L3QuNC5INGE0L7RgNC80Ysg0L7QsSDQvtGI0LjQsdC60LDRhSDQt9Cw0L/QvtC70L3QtdC90LjRjyDQuNC90L/Rg9GC0L7QslxyXG4gIGNsZWFyRXJyb3JNZXNzYWdlcyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8v0YTRg9C90LrRhtC40Y8g0YPRgdGC0LDQvdC+0LLQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQutC90L7Qv9C60Lggc3VibWl0XHJcbiAgc2V0U3VibWl0QnRuU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAoIXRoaXMuX2Zvcm0uY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ0bi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvL9Ck0YPQvdC60YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuC4g0JjRidC10Lwg0YTQvtGA0LzRgyDQsiDQv9C+0L/QsNC/0LUsINC4INCy0LXRiNCw0LXRgiDRgdC70YPRiNCw0YLQtdC70Lggc3VibWl0INC90LAg0L3QtdGRINC4INGB0LvRg9GI0LDRgtC10LvQuCBpbnB1dCDQvdCwINGN0LvQtdC80LXQvdGC0Ysg0YTQvtGA0LzRi1xyXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH07XHJcbn1cclxuIiwiY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSBvcHRpb25zLnJlbmRlcmVyO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy5jb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHNGcm9tU2VydmVyLCBteUlkZW50aWZpY2F0b3IpIHtcclxuICAgIGluaXRpYWxDYXJkc0Zyb21TZXJ2ZXIuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSwgbXlJZGVudGlmaWNhdG9yKSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtQWZ0ZXJMYXN0T25lKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtQmVmb3JlRmlyc3RPbmUoZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBTZWN0aW9uIH07XHJcbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL9GE0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y8gcG9wdXAg0LrQu9C40LrQsNGPINC90LAgT3ZlcmxheSAo0LHQtdC3INGB0L7RhdGA0LDQvdC10L3QuNGPKVxyXG4gIF9oYW5kbGVQb3B1cE92ZXJsYXlDbGljayhlKSB7XHJcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ID09IGUudGFyZ2V0KSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVQb3B1YkNsb3NlQnRuQ2xpY2soKSB7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNsb3NlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5idXR0b25fdHlwZV9jbG9zZVwiKTtcclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVQb3B1YkNsb3NlQnRuQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlUG9wdXBPdmVybGF5Q2xpY2suYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcykpOyAvL9Cy0LXRiNCw0LXQvCDRgdC70YPRiNCw0YLQtdC70YwgRXNjXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpKTsgLy/RgdC90LjQvNCw0LXQvCDRgdC70YPRiNCw0YLQtdC70YwgRXNjXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLmltZ1BvcHVwSW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLmltZ1BvcHVwQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlLWNhcHRpb25cIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmROYW1lLCBjYXJkUGljU3JjKSB7XHJcbiAgICB0aGlzLmltZ1BvcHVwSW1hZ2VFbGVtZW50LmFsdCA9IGNhcmROYW1lO1xyXG4gICAgdGhpcy5pbWdQb3B1cEltYWdlRWxlbWVudC5zcmMgPSBjYXJkUGljU3JjO1xyXG4gICAgdGhpcy5pbWdQb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBjYXJkTmFtZTtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEZvcm1GdW5jdGlvbikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5zdWJtaXRGb3JtRnVuY3Rpb24gPSBzdWJtaXRGb3JtRnVuY3Rpb247XHJcblxyXG4gICAgdGhpcy5mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfc3VibWl0XCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ICsgXCIuLi5cIjtcclxuICAgIH0gZWxzZSBpZiAoIWlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQuc2xpY2UoMCwgLTMpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXRzVmFsdWVzW2lucHV0LmlkXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRzVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVN1Ym1pdEV2ZW50KGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuc3VibWl0Rm9ybUZ1bmN0aW9uKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlU3VibWl0RXZlbnQuYmluZCh0aGlzKSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLmZvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLmZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uX3R5cGVfY2xvc2VcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbl90eXBlX3N1Ym1pdFwiKTtcclxuXHJcbiAgICB0aGlzLl9wcm9taXNlID0gbnVsbDtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCArIFwiLi4uXCI7XHJcbiAgICB9IGVsc2UgaWYgKCFpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50LnNsaWNlKDAsIC0zKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICBzdXBlci5faGFuZGxlRXNjQ2xvc2UoZSk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3Byb21pc2UgIT09IG51bGwpIHtcclxuICAgICAgdGhpcy5fcmVzb2x2ZVByb21pc2UoZmFsc2UpO1xyXG4gICAgICB0aGlzLl9wcm9taXNlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVQb3B1YkNsb3NlQnRuQ2xpY2soKSB7XHJcbiAgICBzdXBlci5faGFuZGxlUG9wdWJDbG9zZUJ0bkNsaWNrKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuX3Byb21pc2UgIT09IG51bGwpIHtcclxuICAgICAgdGhpcy5fcmVzb2x2ZVByb21pc2UoZmFsc2UpO1xyXG4gICAgICB0aGlzLl9wcm9taXNlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVQb3B1cE92ZXJsYXlDbGljayhlKSB7XHJcbiAgICBpZiAoZS5jdXJyZW50VGFyZ2V0ID09IGUudGFyZ2V0KSB7XHJcbiAgICAgIGlmICh0aGlzLl9wcm9taXNlICE9PSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzb2x2ZVByb21pc2UoZmFsc2UpO1xyXG4gICAgICAgIHRoaXMuX3Byb21pc2UgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlU3VibWl0RXZlbnQoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIGlmICh0aGlzLl9wcm9taXNlICE9PSBudWxsKSB7XHJcbiAgICAgIHRoaXMuX3Jlc29sdmVQcm9taXNlKHRydWUpO1xyXG4gICAgICB0aGlzLl9wcm9taXNlID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHdhaXRVbnRpbENsb3NlZCgpIHtcclxuICAgIGlmICh0aGlzLl9wcm9taXNlID09IG51bGwpIHtcclxuICAgICAgdGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0aGlzLl9yZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLl9oYW5kbGVTdWJtaXRFdmVudC5iaW5kKHRoaXMpKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVBYm91dFNlbGVjdG9yLCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcm9maWxlQWJvdXRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZUFib3V0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5wcm9maWxlQXZhdGFyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJEYXRhID0ge307XHJcbiAgICAvL1wicHJvZmlsZU5hbWVcIiDQuCBcInByb2ZpbGVBYm91dFwiINC/0YDQvtC/0LjRgdCw0L3RiyDQsiBuYW1lINC40L3Qv9GD0YLQvtCyINC/0L7Qv9Cw0L/QsCBwb3B1cF90eXBlX3Byb2ZpbGVcclxuICAgIC8v0YfRgtC+0LHRiyDRgdCy0Y/Qt9Cw0YLRjCDRgSDQvNC10YLQvtC00L7QvCBzZXRJbnB1dFZhbHVlcyDQutC70LDRgdGB0LAgUG9wdXBXaXRoRm9ybVxyXG4gICAgdXNlckRhdGEucHJvZmlsZU5hbWUgPSB0aGlzLl9wcm9maWxlTmFtZUVsLnRleHRDb250ZW50O1xyXG4gICAgdXNlckRhdGEucHJvZmlsZUFib3V0ID0gdGhpcy5fcHJvZmlsZUFib3V0RWwudGV4dENvbnRlbnQ7XHJcbiAgICByZXR1cm4gdXNlckRhdGE7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHVybCkge1xyXG4gICAgdGhpcy5wcm9maWxlQXZhdGFyRWwuc3JjID0gdXJsO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJvZmlsZUFib3V0RWwudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgdXNlckluZm9Db25maWcsXHJcbiAgcHJvZmlsZUVkaXRCdG4sXHJcbiAgbmV3Q2FyZEFkZEJ0bixcclxuICBhcGlPcHRpb25zLFxyXG4gIGF2YXRhck92ZXJsYXlFbCxcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCB7IGhhbmRsZVByb2ZpbGVFZGl0QnRuQ2xpY2ssIGhhbmRsZU5ld0NhcmRBZGRCdG5DbGljaywgY3JlYXRlQ2FyZCB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5cclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpT3B0aW9ucyk7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8odXNlckluZm9Db25maWcpO1xyXG5cclxuLy/QuNC90YHRgtCw0L3RgSDQvtGC0LLQtdGH0LDRjtGJ0LjQuSDQt9CwINGA0LDQsdC+0YLRgyDQv9C+0L/QsNC/0LAg0L/RgNC+0YHQvNC+0YLRgNCwINC60LDRgNGC0LjQvdC60LhcclxuZXhwb3J0IGNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9C40L3RgdGC0LDQvdGBINC+0YLQstC10YfQsNGO0YnQuNC5INC30LAg0YDQsNCx0L7RgtGDINC/0L7Qv9Cw0L/QsCDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5leHBvcnQgY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9uZXctY2FyZFwiLCAoaW5wdXRzVmFsdWVzKSA9PiB7XHJcbiAgY29uc3QgcGljdHVyZU5hbWVGcm9tSW5wdXQgPSBpbnB1dHNWYWx1ZXNbXCJmb3JtX19pbnB1dF90eXBlX3BsYWNlLW5hbWVcIl07XHJcbiAgY29uc3QgcGljdHVyZUxpbmtGcm9tSW5wdXQgPSBpbnB1dHNWYWx1ZXNbXCJmb3JtX19pbnB1dF90eXBlX2ltYWdlLWxpbmtcIl07XHJcblxyXG4gIG5ld0NhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnNlbmROZXdDYXJkSW5mbyhwaWN0dXJlTmFtZUZyb21JbnB1dCwgcGljdHVyZUxpbmtGcm9tSW5wdXQpXHJcbiAgICAudGhlbigobXlOZXdDYXJkRGF0YUZyb21TZXJ2ZXIpID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKG15TmV3Q2FyZERhdGFGcm9tU2VydmVyLCBteU5ld0NhcmREYXRhRnJvbVNlcnZlci5vd25lci5faWQpO1xyXG4gICAgICBlbGVtZW50c0NvbnRhaW5lci5hZGRJdGVtQmVmb3JlRmlyc3RPbmUobmV3Q2FyZEVsZW1lbnQpO1xyXG4gICAgICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0LjQvdGB0YLQsNC90YEg0L7RgtCy0LXRh9Cw0Y7RidC40Lkg0LfQsCDRgNCw0LHQvtGC0YMg0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LrQuFxyXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX25ldy1hdmF0YXJcIiwgKGlucHV0c1ZhbHVlcykgPT4ge1xyXG4gIGNvbnN0IG5ld0F2YXRhclVybCA9IGlucHV0c1ZhbHVlc1tcImZvcm1fX2lucHV0X3R5cGVfYXZhdGFyLWxpbmtcIl07XHJcbiAgYXZhdGFyRWRpdFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpLnNlbmRVc2VyQXZhdGFyKG5ld0F2YXRhclVybCkudGhlbigocmVzKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgYXZhdGFyRWRpdFBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgYXZhdGFyRWRpdFBvcHVwLmNsb3NlKCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5hdmF0YXJFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0LjQvdGB0YLQsNC90YEg0L7RgtCy0LXRh9Cw0Y7RidC40Lkg0LfQsCDRgNCw0LHQvtGC0YMg0L/QvtC/0LDQv9CwINGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LTQsNC90L3Ri9GFINC+INC/0YDQvtGE0LjQu9C1XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIiwgKGlucHV0c1ZhbHVlcykgPT4ge1xyXG4gIHByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnNlbmRVc2VySW5mbyhcclxuICAgICAgaW5wdXRzVmFsdWVzW1wiZm9ybV9faW5wdXRfdHlwZV9wcm9maWxlLW5hbWVcIl0sXHJcbiAgICAgIGlucHV0c1ZhbHVlc1tcImZvcm1fX2lucHV0X3R5cGVfcHJvZmlsZS1hYm91dFwiXVxyXG4gICAgKVxyXG4gICAgLnRoZW4oKHVzZXJEYXRhRnJvbVNlcnZlcikgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YUZyb21TZXJ2ZXIubmFtZSwgdXNlckRhdGFGcm9tU2VydmVyLmFib3V0KTtcclxuICAgICAgcHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICBwcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgICAgcmV0dXJuIHVzZXJEYXRhRnJvbVNlcnZlcjtcclxuICAgIH0pO1xyXG59KTtcclxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL9C40L3RgdGC0LDQvdGBINC+0YLQstC10YfQsNGO0YnQuNC5INC30LAg0YDQsNCx0L7RgtGDINC/0L7Qv9Cw0L/QsCDQv9C+0LTRgtCy0LXRgNC20LTQtdC90LjRjyDRg9C00LDQu9C10L3QuNGPINC60LDRgNGC0L7Rh9C60LhcclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1hdGlvblBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIi5wb3B1cF90eXBlX2NvbmZpcm1hdGlvblwiKTtcclxuY29uZmlybWF0aW9uUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0YHQvtC30LTQsNC10Lwg0LjQvdGB0YLQsNC90YHRiyDQutC70LDRgdGB0LAg0LLQsNC70LjQtNCw0YbQuNC4INC00LvRjyDQv9C+0L/QsNC/0L7QsiDRgSDRhNC+0YDQvNCw0LzQuFxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwcm9maWxlUG9wdXAuZm9ybSk7XHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkUG9wdXBWYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIG5ld0NhcmRQb3B1cC5mb3JtKTtcclxuZXhwb3J0IGNvbnN0IG5ld0F2YXRhclBvcHVwVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBhdmF0YXJFZGl0UG9wdXAuZm9ybSk7XHJcblxyXG4vL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINCy0LDQu9C40LTQsNGG0LjQuCjQstC10YjQsNC90LjQtSDRgdC70YPRiNCw0YLQtdC70LXQuSDQv9C+INGB0YPRgtC4KVxyXG5wcm9maWxlUG9wdXBWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbm5ld0NhcmRQb3B1cFZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxubmV3QXZhdGFyUG9wdXBWYWxpZGF0ZS5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL9Cy0LXRiNCw0LXQvCDRgdC70YPRiNCw0YLQtdC70Lgg0L3QsCDQvtGB0L3QvtCy0L3Ri9C1INC00LLQtSDQutC90L7Qv9C60LggKyDQsNCy0LDRgtCw0YAg0L3QsCDQvtGB0L3QvtCy0L3QvtC5INGB0YLRgNCw0L3QuNGG0LVcclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVByb2ZpbGVFZGl0QnRuQ2xpY2spO1xyXG5uZXdDYXJkQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVOZXdDYXJkQWRkQnRuQ2xpY2spO1xyXG5hdmF0YXJPdmVybGF5RWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vL9GB0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCBTZWN0aW9uINC00LvRjyDQvtGC0YDQuNGB0L7QstGL0LLQsNC90LjRjyDQutCw0YDRgtC+0YfQtdC6XHJcbmNvbnN0IGVsZW1lbnRzQ29udGFpbmVyID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiAoaW5pdGlhbENhcmRzSXRlbSwgbXlJZGVudGlmaWNhdG9yKSA9PiB7XHJcbiAgICBjb25zdCDRgWFyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGluaXRpYWxDYXJkc0l0ZW0sIG15SWRlbnRpZmljYXRvcik7XHJcbiAgICBlbGVtZW50c0NvbnRhaW5lci5hZGRJdGVtQWZ0ZXJMYXN0T25lKNGBYXJkRWxlbWVudCk7XHJcbiAgfSxcclxuICBjb250YWluZXJTZWxlY3RvcjogXCIuZWxlbWVudHNfX2xpc3RcIixcclxufSk7XHJcblxyXG4vL9GB0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCBTZWN0aW9uINC00LvRjyDQvtGC0YDQuNGB0L7QstGL0LLQsNC90LjRjyDQtNCw0L3QvdGL0YUg0L/RgNC+0YTQuNC70Y9cclxuY29uc3QgcHJvZmlsZUNvbnRhaW5lciA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKHVzZXJEYXRhRnJvbVNlcnZlcikgPT4ge1xyXG4gICAgY29uc3QgZG9tRWxlbWVudHMgPSBjcmVhdGVQcm9maWxlU2VjdGlvbih1c2VyRGF0YUZyb21TZXJ2ZXIpO1xyXG4gICAgcHJvZmlsZUNvbnRhaW5lci5hZGRJdGVtQWZ0ZXJMYXN0T25lKGRvbUVsZW1lbnRzKTtcclxuICB9LFxyXG4gIGNvbnRhaW5lclNlbGVjdG9yOiBcIi5wcm9maWxlXCIsXHJcbn0pO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxyXG4gIC50aGVuKChbdXNlckRhdGFGcm9tU2VydmVyLCBpbml0aWFsQ2FyZHNGcm9tU2VydmVyXSkgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGFGcm9tU2VydmVyLm5hbWUsIHVzZXJEYXRhRnJvbVNlcnZlci5hYm91dCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhRnJvbVNlcnZlci5hdmF0YXIpO1xyXG4gICAgZWxlbWVudHNDb250YWluZXIucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzRnJvbVNlcnZlciwgdXNlckRhdGFGcm9tU2VydmVyLl9pZCk7XHJcblxyXG4gICAgcmV0dXJuIHVzZXJEYXRhRnJvbVNlcnZlcjtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwOiAke2Vycn1gKTtcclxuICB9KTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidmFsaWRhdGlvbkNvbmZpZyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZUVkaXRCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuZXdDYXJkQWRkQnRuIiwiYXZhdGFyT3ZlcmxheUVsIiwiQXBpIiwib3B0aW9ucyIsInRoaXMiLCJiYXNlVXJsIiwiYXV0aFRva2VuIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwibmFtZSIsImxpbmsiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwiY2FyZElkIiwiQ2FyZCIsIl9jYXJkRGF0YSIsImNhcmREYXRhIiwiX3RlbXBsYXRlIiwidGVtcGxhdGVTZWxlY3RvciIsIl9teUlkZW50aWZpY2F0b3IiLCJteUlkZW50aWZpY2F0b3IiLCJfaGFuZGxlT25DYXJkQ2xpY2siLCJoYW5kbGVPbkNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVCdG5DbGljayIsImhhbmRsZURlbGV0ZUJ0bkNsaWNrIiwiX2hhbmRsZUxpa2VDYXJkIiwiaGFuZGxlTGlrZUNhcmQiLCJpc0xpa2VkIiwiX2N1cnJlbnRDYXJkTGlrZUJ0biIsImNsYXNzTGlzdCIsImFkZCIsIl9jYXJkSXNMaWtlZEJ5TWUiLCJyZW1vdmUiLCJfY3VycmVudEVsZW1lbnQiLCJfY3VycmVudENhcmRQaWN0dXJlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9pbWFnZURlbGV0ZUJ0biIsIl9pZCIsIl9kZWxldGVEb21FbGVtZW50IiwiYmluZCIsIl9jdXJyZW50Q2FyZExpa2VDb3VudGVyIiwiX3NldExpa2VCdG5TdGF0ZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY3VycmVudENhcmROYW1lIiwidGV4dENvbnRlbnQiLCJhbHQiLCJzcmMiLCJsaWtlcyIsImxlbmd0aCIsInNvbWUiLCJ1c2VyRGF0YSIsIl9jdXJyZW50RGVsZXRlQnV0dG9uIiwib3duZXIiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJjYXJkTmFtZSIsImNhcmRQaWNTcmMiLCJwb3B1cFdpdGhJbWFnZSIsIm9wZW4iLCJkZWxldGVDdXJyZW50RG9tRWxlbWVudCIsImNvbmZpcm1hdGlvblBvcHVwIiwiaXNDb25maXJtZWQiLCJhcGkiLCJyZW5kZXJMb2FkaW5nIiwiY2xvc2UiLCJmYWxzZUZyb21Qb3B1cENsb3NlZCIsImlzQ2FyZEFscmVhZHlMaWtlZEJ5TWUiLCJjb3VudGVyT2ZMaWtlc0VsZW1lbnQiLCJzZXRMaWtlQnRuU3RhdGVPZkN1cnJlbnRDYXJkIiwicmVzb2x2ZSIsInNlbmRSZW1vdmVMaWtlUmVxdWVzdCIsImNhcmREYXRhRnJvbVNlcnZlciIsInNlbmRTZXRMaWtlUmVxdWVzdCIsImNyZWF0ZUNhcmQiLCJjcmVhdGVFbGVtZW50Tm9kZSIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiX2Vycm9yRWxlbWVudCIsIl9mb3JtIiwiaWQiLCJfdmFsaWRhdGlvbkNvbmZpZyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJzZXRTdWJtaXRCdG5TdGF0ZSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIl9oYW5kbGVJbnB1dCIsImNoZWNrVmFsaWRpdHkiLCJfc3VibWl0QnRuIiwicmVtb3ZlQXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiU2VjdGlvbiIsIl9yZW5kZXJlciIsInJlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNvbnRhaW5lclNlbGVjdG9yIiwiaW5pdGlhbENhcmRzRnJvbVNlcnZlciIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImUiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwiX2hhbmRsZVBvcHViQ2xvc2VCdG5DbGljayIsIl9oYW5kbGVQb3B1cE92ZXJsYXlDbGljayIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsImltZ1BvcHVwSW1hZ2VFbGVtZW50IiwiaW1nUG9wdXBDYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEZvcm1GdW5jdGlvbiIsIl9zdWJtaXRCdXR0b24iLCJfY2xvc2VCdXR0b24iLCJpc0xvYWRpbmciLCJzbGljZSIsImlucHV0c1ZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJfaGFuZGxlU3VibWl0RXZlbnQiLCJyZXNldCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9wcm9taXNlIiwiX3Jlc29sdmVQcm9taXNlIiwiVXNlckluZm8iLCJwcm9maWxlTmFtZVNlbGVjdG9yIiwicHJvZmlsZUFib3V0U2VsZWN0b3IiLCJwcm9maWxlQXZhdGFyU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWVFbCIsIl9wcm9maWxlQWJvdXRFbCIsInByb2ZpbGVBdmF0YXJFbCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUFib3V0IiwidXJsIiwidXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsIm5ld0NhcmRQb3B1cCIsInBpY3R1cmVOYW1lRnJvbUlucHV0IiwicGljdHVyZUxpbmtGcm9tSW5wdXQiLCJzZW5kTmV3Q2FyZEluZm8iLCJteU5ld0NhcmREYXRhRnJvbVNlcnZlciIsIm5ld0NhcmRFbGVtZW50IiwiZWxlbWVudHNDb250YWluZXIiLCJhZGRJdGVtQmVmb3JlRmlyc3RPbmUiLCJhdmF0YXJFZGl0UG9wdXAiLCJuZXdBdmF0YXJVcmwiLCJzZW5kVXNlckF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJwcm9maWxlUG9wdXAiLCJzZW5kVXNlckluZm8iLCJ1c2VyRGF0YUZyb21TZXJ2ZXIiLCJzZXRVc2VySW5mbyIsInByb2ZpbGVQb3B1cFZhbGlkYXRlIiwibmV3Q2FyZFBvcHVwVmFsaWRhdGUiLCJuZXdBdmF0YXJQb3B1cFZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInVzZXJEYXRhRnJvbVBhZ2UiLCJnZXRVc2VySW5mbyIsInNldElucHV0VmFsdWVzIiwiY2xlYXJFcnJvck1lc3NhZ2VzIiwiaW5pdGlhbENhcmRzSXRlbSIsItGBYXJkRWxlbWVudCIsImFkZEl0ZW1BZnRlckxhc3RPbmUiLCJwcm9maWxlQ29udGFpbmVyIiwiZG9tRWxlbWVudHMiLCJjcmVhdGVQcm9maWxlU2VjdGlvbiIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==